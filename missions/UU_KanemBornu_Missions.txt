uukbo_free_1 = {
    slot = 1
	generic = no
	ai = yes
	potential = {
        tag = KBO 
    }
    has_country_shield = yes 

    uukbo_counter_the_nobility = {
        icon = mission_noble_council
		required_missions = { }
		position = 1
        trigger = {
            stability = 1

        }
        effect = {
            add_stability = -1
            add_estate_loyalty = {
                estate = estate_nobles
                loyalty = -30
            }
            add_estate_loyalty_modifier = {
                estate = estate_nobles
                desc = UUKBO_FIGHTING_NOBILITY
                loyalty = -20
                duration = 5475 #15y
            }
        }
        ai_weight = {
            factor = 75
        }
    }
    uukbo_reign_in_the_kingmakers = {
        icon = mission_have_two_subjects
		required_missions = { uukbo_counter_the_nobility }
		position = 2
        trigger = {
            estate_loyalty = {
                estate = estate_nobles
                loyalty = 40
            }
            NOT = {
                num_of_rebel_armies = 1
                num_of_rebel_controlled_provinces = 1
                estate_influence = {
                    estate = estate_nobles
                    influence = 30
                }
            }
        }
        effect = {
            change_estate_land_share = {
                estate = estate_nobles
                share = -20
            }
            add_country_modifier = {
                name = kbo_death_to_kingmakers
                duration = -1
            }
        }
        ai_weight = {
            factor = 250
        }
    }
    uukbo_reform_bureaucracy = {
        icon = mission_taula_de_canvi
		required_missions = { uukbo_reign_in_the_kingmakers }
		position = 3
        trigger = {
            reform_level = 3
            monthly_adm = 10
            NOT = {
                corruption = 0.1
                inflation = 0.1
            }
            OR = {
                capital_scope = {
                    has_building = courthouse
                }
                NOT = { average_autonomy = 10 }
            }
        }
        effect = {
            add_mil_power = 50
            add_adm_power = 50
            add_dip_power = 50
            add_country_modifier = {
                name = uukbo_strong_government
                duration = 7300 #20y
            }
        }
    }
    uukbo_trans_saharan_entrepots = {
        icon = mission_conquer_timbuktu
		required_missions = { }
		position = 4
        trigger = {
            calc_true_if = {
				all_owned_province = {
					OR = {
						province_has_center_of_trade_of_level = 2
						province_has_center_of_trade_of_level = 3
					}
                    has_building = marketplace
                    development = 10
					controlled_by = owner
					is_core = ROOT
				}
				amount = 3
			}
        }
        effect = {
            azbin_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
            east_azbin_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
        }
    }
    uukbo_trade_dominance = {
        icon = mission_trade_in_gold_coast
		required_missions = { uukbo_trans_saharan_entrepots }
		position = 5
        provinces_to_highlight = {
            OR = {
                province_id = 2275
                province_id = 2277
                province_id = 2932
                province_id = 4990
                area = azbin_area
            }
            OR = {
                NOT = { owned_by = ROOT }
                NOT = { is_core = ROOT }
            }
        }
        trigger = {
            azbin_area = {
                type = all
                owned_by = ROOT
                is_core = ROOT 
            }
            2275 = {
                owned_by = ROOT
                is_core = ROOT 
            }
            2277 = {
                owned_by = ROOT
                is_core = ROOT 
            }
            2932 = {
                owned_by = ROOT
                is_core = ROOT 
            }
            4990 = {
                owned_by = ROOT
                is_core = ROOT 
            }
            1149 = { #Katsina
                is_strongest_trade_power = ROOT
            }
        }
        effect = {
            1149 = { #Katsina
                add_trade_modifier = {
                    who = ROOT
                    duration = 18250
                    power = 35
                    key = uukbo_trade_modifier
                }
            }
            2772 = { #Ethiopia
                add_trade_modifier = {
                    who = ROOT
                    duration = 18250
                    power = 35
                    key = uukbo_trade_modifier
                }
            }
            341 = { #Tunis
                add_trade_modifier = {
                    who = ROOT
                    duration = 18250
                    power = 35
                    key = uukbo_trade_modifier
                }
            }
            hidden_effect = {
                discover_province = 4991
                discover_province = 4992
            }
            darfur_central_sahara_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
            new_darfur_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
            add_country_modifier = {
                name = uukbo_colonist
                duration = 18250 #50y
            }
        }
    }      
}
uukbo_lock_1 = {
    slot = 1
	generic = no
	ai = yes
	potential = {
        tag = KBO 
        NOT = { has_country_flag = uukbo_restored_empire }
    }
    has_country_shield = yes

    uukbo_lock_c1r6 = {
		icon = mission_locked_mission
		required_missions = { uukbo_trade_dominance }
		position = 6
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}
    uukbo_lock_c1r7 = {
		icon = mission_locked_mission
		required_missions = { uukbo_lock_c2r6 }
		position = 7
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}    
}
uukbo_gated_1 = {
    slot = 1
	generic = no
	ai = yes
	potential = {
        tag = KBO 
        has_country_flag = uukbo_restored_empire
    }
    has_country_shield = yes

    uukbo_secure_eastern_route = {
		icon = mission_traverse_the_sahara
		required_missions = { uukbo_trade_dominance }
		position = 6
        provinces_to_highlight = {
            OR = {
                area = new_darfur_area
                area = darfur_central_sahara_area
            }
            OR = {
                NOT = { owned_by = ROOT }
                NOT = { is_core = ROOT }
            }
        }
		trigger = {
            darfur_central_sahara_area = {
                type = all
                owned_by = ROOT
                is_core = ROOT 
            }
            new_darfur_area = {
                type = all
                owned_by = ROOT
                is_core = ROOT 
            }
		}
		effect = {
            add_country_modifier = {
                name = uukbo_ethiopia_merchant
                duration = -1
            }
		}
	}
    uukbo_control_mossi = {
		icon = mission_kon_conquer_ksj
		required_missions = { uukbo_conquer_hausa }
		position = 7
        provinces_to_highlight = {
            OR = {
                province_id = 2267
                province_id = 1143
                area = upper_volta_area
            }
            OR = {
                NOT = { owned_by = ROOT }
                NOT = { is_core = ROOT }
            }
        } 
		trigger = {
		    upper_volta_area = {
                type = all
                owned_by = ROOT
                is_core = ROOT 
            }
            1143 = {
                owned_by = ROOT
                is_core = ROOT 
            }
            2267 = {
                owned_by = ROOT
                is_core = ROOT 
            }
		}
		effect = {
            add_yearly_manpower = 1
            add_country_modifier = {
                name = uukbo_mossi_cavalry
                duration = -1
            }
            add_accepted_culture = mossi
		}
	}   
}

uukbo_free_2 = {
    slot = 2
	generic = no
	ai = yes
	potential = {
        tag = KBO 
    }
    has_country_shield = yes

    uukbo_permanent_capital = {
        icon = mission_sw_against_the_desert
		required_missions = { }
		position = 1
        trigger = {
            years_of_income = 1
            1157 = {
                owned_by = ROOT
                fort_level = 3
            }
        }
        effect = {
            if = {
                limit = {
                    NOT = { capital = 1157 }
                }
			    set_capital = 1157
            }
            add_years_of_income = -0.8
            1157 = {
                rename_capital = "Gazargamu"
                add_province_modifier = {
                    name = kbo_gazargamu
                    duration = 7300
                }
            }
        }
        ai_weight = {
            factor = 200
        }
    }
    uukbo_develop_ngazargamu = {
        icon = mission_conquer_50_development
		required_missions = { uukbo_permanent_capital }
		position = 2
        trigger = {
            1157 = {
                owned_by = ROOT
                num_of_times_improved_by_owner = 5
                development = 12
                has_building = marketplace
            }
        }
        effect = {
            set_country_flag = kbo_gazargamu
            add_country_modifier = {
                name = uukbo_imperial_capital
                duration = -1
            }
        }
    }
    uukbo_prosperity_in_bornu = {
        icon = mission_war_chest
		required_missions = { uukbo_develop_ngazargamu }
		position = 3
        trigger = {
            is_at_war = no 
            bornu_area = {
                type = all
			    country_or_non_sovereign_subject_holds = root
                NOT = { devastation = 0.1 }
                num_of_times_improved_by_owner = 2
            }
            1157 = {
                is_prosperous = yes
            }
        }
        effect = {
            add_mil_power = 50
            add_adm_power = 50
            add_dip_power = 50
            bornu_area = {
                add_base_tax = 1
                add_base_production = 1
                add_base_manpower = 1
            }
            add_country_modifier = {
                name = uukbo_thriving_empire
                duration = 7300 #20y
            }
        }
    } 
    uukbo_end_dynastic_struggle = {
        icon = mission_monarch_in_throne_room
		required_missions = { 
            uukbo_reform_bureaucracy
            uukbo_prosperity_in_bornu 
            uukbo_khalifa
        }
		position = 4
        trigger = {
            legitimacy = 95
            months_of_ruling = 120
            has_heir = yes
            heir_claim = 95
            heir_has_ruler_dynasty = yes 
            NOT = { corruption = 0.1 }
        }
        effect = {
            remove_country_modifier = uukbo_dynastic_struggle_modifier
            change_adm = 1
            change_dip = 1
            change_mil = 1
            country_event = { 
                id = flavor_kbo.9
            }
        }
    }
    uukbo_restore_empire = {
        icon = mission_empire
		required_missions = { 
            uukbo_hajj
            uukbo_end_dynastic_struggle
        }
		position = 5
        trigger = {
            prestige = 75
            grown_by_development = 75
        }
        effect = {
            set_government_rank = 3
            set_country_flag = uukbo_restored_empire
            swap_non_generic_missions = yes
            country_event = {
                id = flavor_kbo.10
            }
            zazzau_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
            }
            hausa_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
            }
            katsina_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
            }
        }
    }
        
}
uukbo_lock_2 = {
    slot = 2
	generic = no
	ai = yes
	potential = {
        tag = KBO 
        NOT = { has_country_flag = uukbo_restored_empire }
    }
    has_country_shield = yes
    uukbo_lock_c2r6 = {
		icon = mission_locked_mission
		required_missions = { 
            uukbo_restore_empire 
            uukbo_trade_dominance
            uukbo_military_reform
        }
		position = 6
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}
    uukbo_lock_c2r7 = {
		icon = mission_locked_mission
		required_missions = { uukbo_lock_c2r6 }
		position = 7
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}
    uukbo_lock_c2r8 = {
		icon = mission_locked_mission
		required_missions = { uukbo_lock_c2r7 }
		position = 8
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}    
}
uukbo_gated_2 = {
    slot = 2
	generic = no
	ai = yes
	potential = {
        tag = KBO 
        has_country_flag = uukbo_restored_empire
    }
    has_country_shield = yes

    uukbo_conquer_hausa = {
		icon = mission_son_own_develop_clothes_and_salt
		required_missions = { 
            uukbo_restore_empire 
            uukbo_trade_dominance
            uukbo_military_reform
        }
		position = 6
		provinces_to_highlight = {
            OR = {
                area = zazzau_area
                area = hausa_area
                area = katsina_area
            }
            OR = {
                NOT = { owned_by = ROOT }
                NOT = { is_core = ROOT }
            }
        } 
		trigger = {
		    hausa_area = {
                type = all
                owned_by = ROOT
                is_core = ROOT 
            }
            katsina_area = {
                type = all
                owned_by = ROOT
                is_core = ROOT 
            }
            zazzau_area = {
                type = all
                owned_by = ROOT
                is_core = ROOT 
            }
		}
		effect = {
            add_treasury = 500
            lower_niger_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
            }
            benin_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
            }
		}
	}
    uukbo_reach_the_coast = {
		icon = mission_caribbean_cn
		required_missions = { uukbo_conquer_hausa }
		position = 7
		trigger = {
            calc_true_if = {
                all_owned_province = {
					has_port = yes
                    is_core = ROOT
					NOT = { devastation = 0.1 }
				}
				amount = 3
            }
		}
		effect = {
            custom_tooltip = uukbo_ports_tt
            tooltip = {
                2290 = {
                    add_base_tax = 1
                    add_base_production = 2
                    add_province_modifier = { #1
                        name = uukbo_ports_mod
                        duration = -1
                    }
                    if = {
                        limit = {
                            has_building = grand_shipyard
                        }
                        ROOT = {
                            heavy_ship = PREV 
                        }
                    } else_if = {
                        limit = {
                            has_building = shipyard
                        }
                        add_building_construction = {
                            building = grand_shipyard
                            speed = 1
                            cost = 0
                        }
                    } else = {
                        add_building_construction = {
                            building = shipyard
                            speed = 1
                            cost = 0
                        }
                    }  
                }
            }
            hidden_effect = {
                random_owned_province = {
                    limit = {
                        has_port = yes 
                    }
                    add_base_tax = 1
                    add_base_production = 2
                    add_province_modifier = { #1
                        name = uukbo_ports_mod
                        duration = -1
                    }
                    if = {
                        limit = {
                            has_building = grand_shipyard
                        }
                        ROOT = {
                            heavy_ship = PREV 
                        }
                    } else_if = {
                        limit = {
                            has_building = shipyard
                        }
                        add_building_construction = {
                            building = grand_shipyard
                            speed = 1
                            cost = 0
                        }
                    } else = {
                        add_building_construction = {
                            building = shipyard
                            speed = 1
                            cost = 0
                        }
                    }  
                }
                random_owned_province = { #2
                    limit = {
                        has_port = yes 
                        NOT = { has_province_modifier = uukbo_ports_mod }
                    }
                    add_base_tax = 1
                    add_base_production = 2
                    add_province_modifier = {
                        name = uukbo_ports_mod
                        duration = -1
                    }
                    if = {
                        limit = {
                            has_building = grand_shipyard
                        }
                        ROOT = {
                            heavy_ship = PREV 
                        }
                    } else_if = {
                        limit = {
                            has_building = shipyard
                        }
                        add_building_construction = {
                            building = grand_shipyard
                            speed = 1
                            cost = 0
                        }
                    } else = {
                        add_building_construction = {
                            building = shipyard
                            speed = 1
                            cost = 0
                        }
                    }  
                }
                random_owned_province = { #3
                    limit = {
                        has_port = yes 
                    }
                    add_base_tax = 1
                    add_base_production = 2
                    add_province_modifier = {
                        name = uukbo_ports_mod
                        duration = -1
                    }
                    if = {
                        limit = {
                            has_building = grand_shipyard
                        }
                        ROOT = {
                            heavy_ship = PREV 
                        }
                    } else_if = {
                        limit = {
                            has_building = shipyard
                        }
                        add_building_construction = {
                            building = grand_shipyard
                            speed = 1
                            cost = 0
                        }
                    } else = {
                        add_building_construction = {
                            building = shipyard
                            speed = 1
                            cost = 0
                        }
                    }  
                }
                random_owned_province = { #4
                    limit = {
                        has_port = yes 
                    }
                    add_base_tax = 1
                    add_base_production = 2
                    add_province_modifier = {
                        name = uukbo_ports_mod
                        duration = -1
                    }
                    if = {
                        limit = {
                            has_building = grand_shipyard
                        }
                        ROOT = {
                            heavy_ship = PREV 
                        }
                    } else_if = {
                        limit = {
                            has_building = shipyard
                        }
                        add_building_construction = {
                            building = grand_shipyard
                            speed = 1
                            cost = 0
                        }
                    } else = {
                        add_building_construction = {
                            building = shipyard
                            speed = 1
                            cost = 0
                        }
                    }  
                }
                random_owned_province = { #5
                    limit = {
                        has_port = yes 
                    }
                    add_base_tax = 1
                    add_base_production = 2
                    add_province_modifier = {
                        name = uukbo_ports_mod
                        duration = -1
                    }
                    if = {
                        limit = {
                            has_building = grand_shipyard
                        }
                        ROOT = {
                            heavy_ship = PREV 
                        }
                    } else_if = {
                        limit = {
                            has_building = shipyard
                        }
                        add_building_construction = {
                            building = grand_shipyard
                            speed = 1
                            cost = 0
                        }
                    } else = {
                        add_building_construction = {
                            building = shipyard
                            speed = 1
                            cost = 0
                        }
                    }  
                }
            }
            
		}
	}
    uukbo_drive_out_colonizers = {
		icon = mission_disrupt_portuguese_trade
		required_missions = { uukbo_reach_the_coast }
		position = 8
		trigger = {
            OR = {
                is_year = 1550
                guinea_region = {
                    type = all 
                    is_city = yes
                }
            }
            guinea_region = {
                type = all 
                OR = {
                    owner = {
                        capital_scope = {
                            continent = africa
                        }
                    }
                    is_city = no
                }
            }
		}
		effect = {
            add_prestige = 50
            add_legitimacy = 20
            guinea_coast_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_core = ROOT 
            }
            west_africa_coast_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_core = ROOT 
            }
		}
	}  
}

uukbo_free_3 = {
    slot = 3
	generic = no
	ai = yes
	potential = {
        tag = KBO 
    }
    has_country_shield = yes

    uukbo_combat_syncretism = {
        icon = mission_mal_jihad_upon_own_population
		required_missions = { }
		position = 1
        trigger = {
            stability = 1
        }
        effect = {
            add_stability = -1
            add_country_modifier = {
                name = uukbo_fighting_syncretism
                duration = -1
            }
            custom_tooltip = uukbo_remove_mod_on_next_mission_tt
            if = {
                limit = {
                    has_estate_privilege = estate_dhimmi_guaranteed_autonomy 
                }
                remove_estate_privilege = estate_dhimmi_guaranteed_autonomy
            }
            if = {
                limit = {
                    has_estate_privilege = estate_dhimmi_guarantee_of_traditions
                }
                remove_estate_privilege = estate_dhimmi_guarantee_of_traditions
            }
            add_estate_loyalty = {
                estate = estate_church 
                loyalty = 20
            }
            add_estate_loyalty = {
                estate = estate_dhimmi 
                loyalty = -30
            }
        }
        ai_weight = {
            factor = 75
        }
    } 
    uukbo_enforce_islamic_orthodoxy = {
        icon = mission_into_persia_1
		required_missions = { uukbo_combat_syncretism }
		position = 2
        trigger = {
            religion = sunni
		    government = monarchy
            piety = 0.5
            estate_loyalty = {
                estate = estate_church
                loyalty = 60
            }
            NOT = {
                estate_influence = {
                    estate = estate_dhimmi
                    influence = 15
                }   
            }
            religious_unity = 1
            NOT = {
                has_estate_privilege = estate_dhimmi_guaranteed_autonomy
                has_estate_privilege = estate_dhimmi_guarantee_of_traditions
            }
        }
        effect = {
            remove_country_modifier = uukbo_fighting_syncretism
        	add_country_modifier = {
                name = kbo_religious_orthodoxy
                duration = -1
            }
        }
        ai_weight = {
            factor = 200
        }
    }
    uukbo_khalifa = {
        icon = mission_mosque
		required_missions = { uukbo_enforce_islamic_orthodoxy }
		position = 3
        trigger = {
            OR = {
                361 = {
                    owner = {
                        has_opinion = {
                            who = ROOT
                            value = 150
                        }
                    }
                }
                AND = {
                    piety = 0.75
                    is_defender_of_faith = yes
                }
            }
        }
        effect = {
            add_mil_power = 50
            add_adm_power = 50
            add_dip_power = 50
    		add_prestige = 20
            add_legitimacy = 15
            add_country_modifier = {
                name = uukbo_khalifa_mod
                duration = -1
            }
        }
        ai_weight = {
            factor = 200
        }
    }
    uukbo_hajj = {
        icon = mission_into_arabia
		required_missions = { 
            uukbo_khalifa 
            uukbo_reconquer_kanem
        }
		position = 4
        trigger = {
            has_any_disaster = no
			has_regency = no
			NOT = { num_of_loans = 1 }
			stability = 3
			has_adm_advisor_3 = yes
			has_dip_advisor_3 = yes
			has_mil_advisor_3 = yes
        }
        effect = { #discover the route to Mecca.
            discover_province = 2474 
            discover_province = 2448
            discover_province = 2449
            discover_province = 355
            egypt_region = { discover_country = ROOT }
            discover_province = 364
            discover_province = 379
            discover_province = 2327
            tabuk_area = { discover_country = ROOT }
            medina_area = { discover_country = ROOT }
            mecca_area = { discover_country = ROOT }
            discover_province = 1328
            discover_province = 1329
            country_event = {
                id = flavor_kbo.6
                days = 450
            }
        }
    }   
}
uukbo_lock_3 = {
    slot = 3
	generic = no
	ai = yes
	potential = {
        tag = KBO 
        NOT = { has_country_flag = uukbo_restored_empire }
    }
    has_country_shield = yes
    
    uukbo_lock_c3r5 = {
		icon = mission_locked_mission
		required_missions = { uukbo_hajj }
		position = 5
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}
    uukbo_lock_c3r7 = {
		icon = mission_locked_mission
		required_missions = { 
            uukbo_lock_c3r5 
            uukbo_lock_c4r6
        }
		position = 7
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}    
}
uukbo_gated_3 = {
    slot = 3
	generic = no
	ai = yes
	potential = {
        tag = KBO 
        has_country_flag = uukbo_restored_empire
    }
    has_country_shield = yes

    uukbo_islamic_learning = {
		icon = mission_fatimid_caliphate
		required_missions = { uukbo_hajj }
		position = 5
		trigger = {
            calc_true_if = {
                all_ally = { 
                    NOT = { 
                        capital_scope = {
                            region = sahel_region
                            region = guinea_region
                            region = niger_region
                        }
                    }
                    religion_group = muslim
                    trust = { who = ROOT value = 50 }
                }
                amount = 3
            }
		}
		effect = {
            capital_scope = {
                add_ruler_personality = silver_tongue_personality
                add_province_modifier = {
                    name = uukbo_islamic_embassies
                    duration = -1
                }
            }
		}
	}
    uukbo_university_of_sankore = {
		icon = mission_invade_mali
		required_missions = { 
            uukbo_islamic_learning 
            uukbo_conquer_tuareg
        }
		position = 7
		trigger = {
            1132 = {
                has_great_project = {
                    type = sankore_madrasah
                    tier = 3
                }
                is_core = ROOT
                OR = {
                    has_owner_accepted_culture = yes
                    has_owner_culture = yes
                }
                religion_group = muslim
                has_owner_religion = yes
            }
		}
		effect = {
            add_stability = 1
            add_prestige = 20
            1132 = {
                add_base_tax = 3
                add_base_production = 3
                add_base_manpower = 3
                add_building = university 
            }
		}
	}  
}

uukbo_free_4 = {
    slot = 4
	generic = no
	ai = yes
	potential = {
        tag = KBO 
    }
    has_country_shield = yes

    uukbo_defeat_bilala = {
        icon = mission_invade_kanem
		required_missions = { }
		position = 1
        trigger = {
            army_size = YAO
            army_size_percentage = 1
            OR = {
                AND = {
                    offensive_war_with = YAO
                    war_score_against = {
                        who = YAO 
                        value = 50
                    }
                }
                NOT = { exists = YAO }
            }
        }
        effect = {
            add_army_tradition = 20
            create_general = { tradition = 60 }
        }
        ai_weight = {
            factor = 400
        }
    }

    uukbo_reconquer_kanem = {
        icon = mission_mal_fighting_musa
		required_missions = { uukbo_defeat_bilala }
		position = 3
        provinces_to_highlight = {
            OR = {
                AND = { 
                    area = kanem_area
                    OR = {
                        NOT = { owned_by = ROOT }
                        NOT = { is_core = ROOT }
                        NOT = { has_owner_religion = yes }
                    }
                }
                AND = {
                    YAO = {
                        num_of_cities = 2
                    }
                    is_capital_of = YAO
                }
            }
        }
        trigger = {
            kanem_area = {
                type = all
                owned_by = ROOT 
                is_core = ROOT 
                has_owner_religion = yes
            }
            NOT = {
                YAO = {
                    num_of_cities = 2
                }
            }
        }
        effect = {
            add_mil_power = 50
            add_adm_power = 50
            add_dip_power = 50
            kanem_area = {
                add_base_tax = 1
                add_base_production = 1
                add_base_manpower = 1
            }
            1159 = {
                change_culture = ROOT
            }
            2288 = {
                change_culture = ROOT
            }
            2286 = {
                change_culture = ROOT
            }
        }
        ai_weight = {
            factor = 400
        }
    }
    uukbo_military_reform = {
        icon = mission_levantine_restoration
		required_missions = { uukbo_hajj }
		position = 5
        trigger = {
            army_professionalism = 0.3
            army_tradition = 50
            any_known_country = {
                religion_group = muslim 
                technology_group = muslim
                is_free_or_tributary_trigger = yes
                has_opinion = {
                    who = ROOT
                    value = 100
                }
                alliance_with = ROOT
                tech_difference = 1
            }
        }
        effect = {
            add_army_professionalism = 0.1
            custom_tooltip = uukbo_study_muslim_techgroup_tt
            add_country_modifier = {
                name = uukbo_reforming_army_temp_mod
                duration = 365
            }
            country_event = {
                id = flavor_kbo.11
                days = 365
            }
        }
    }             

}

uukbo_lock_4 = {
    slot = 4
	generic = no
	ai = yes
	potential = {
        tag = KBO 
        NOT = { has_country_flag = uukbo_restored_empire }
    }
    has_country_shield = yes

    uukbo_lock_c4r6 = {
		icon = mission_locked_mission
		required_missions = { uukbo_military_reform }
		position = 6
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}  
    uukbo_lock_c4r7 = {
		icon = mission_locked_mission
		required_missions = { uukbo_lock_c4r6 }
		position = 7
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}
    uukbo_lock_c4r9 = {
		icon = mission_locked_mission
		required_missions = { 
            uukbo_lock_c4r7 
            uukbo_lock_c2r8
        }
		position = 9
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}    
}
uukbo_gated_4 = {
    slot = 4
	generic = no
	ai = yes
	potential = {
        tag = KBO 
        has_country_flag = uukbo_restored_empire
    }
    has_country_shield = yes

    uukbo_conquer_tuareg = {
		icon = mission_conquer_air
		required_missions = { uukbo_military_reform }
		position = 6
		trigger = {
            NOT = { exists = AIR }
            2277 = {
                owned_by = ROOT 
                fort_level = 2
            }
            2274 = {
                owned_by = ROOT 
                fort_level = 2
            }
		}
		effect = {
            azbin_area = {
                add_devastation = -40
                add_local_autonomy = -40
            }
            east_azbin_area = {
                add_devastation = -40
                add_local_autonomy = -40
            }
            dendi_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT 
            }
            western_sahara_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT 
            }
            niger_bend_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT 
            }
            jenne_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT 
            }
		}   
	}  
    uukbo_conquer_mali = {
		icon = mission_the_songhai_campaign
		required_missions = { uukbo_conquer_tuareg }
		position = 7
        provinces_to_highlight = {
             OR = {
                area = dendi_area
                area = niger_bend_area
                area = jenne_area
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
		trigger = {
            dendi_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT 
            }
            niger_bend_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT 
            }
            jenne_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT 
            }
		}
		effect = {
            massina_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT 
            }
            manding_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT 
            }
            kong_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT 
            }
            baghena_area = {
                limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT 
            }
		}
	}
    uukbo_sahel_hegemon = {
		icon = mission_mal_west_african_great_power
		required_missions = { 
            uukbo_conquer_mali
            uukbo_drive_out_colonizers
        }
		position = 9
        provinces_to_highlight = {
            OR = {
                region = niger_region
                region = guinea_region
                region = sahel_region
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
		trigger = {
            niger_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
            guinea_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
            sahel_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
		}
		effect = {
            add_mil_power = 150
            add_country_modifier = {
                name = uukbo_sahel_hegemon_mod
                duration = -1
            }
		}
	}  
}

uukbo_lock_5 = {
    slot = 5
	generic = no
	ai = yes
	potential = {
        tag = KBO 
        NOT = { has_country_flag = uukbo_restored_empire }
    }
    has_country_shield = yes

    uukbo_lock_c5r6 = {
		icon = mission_locked_mission
		required_missions = { uukbo_military_reform }
		position = 6
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}
    uukbo_lock_c5r7 = {
		icon = mission_locked_mission
		required_missions = { uukbo_lock_c4r6 }
		position = 7
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}
    uukbo_lock_c5r8 = {
		icon = mission_locked_mission
		required_missions = { uukbo_lock_c5r7 }
		position = 8
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
		}
	}    
}

uukbo_gated_5 = {
    slot = 5
	generic = no
	ai = yes
	potential = {
        tag = KBO 
        has_country_flag = uukbo_restored_empire
    }
    has_country_shield = yes

    uukbo_gunpowder_empire = {
		icon = mission_cannons_firing
		required_missions = { uukbo_military_reform }
		position = 6
		trigger = {
            mil_tech = 11
            army_size = 80
            num_of_artillery = 15
		}
		effect = {
            add_country_modifier = {
                name = uukbo_artillery_gaming
                duration = -1
            }
		}
	}
    uukbo_contact_maghreb = {
		icon = mission_pacify_the_berbers
		required_missions = { uukbo_conquer_tuareg }
		position = 7
		trigger = {
            has_discovered = 343 #Fez 
            has_discovered = 346 #Tafilalt
            has_discovered = 344 #Marrakesh 
            has_discovered = 2448 #Fezzan 
            has_discovered = 354 #Tripoli, Libya
            has_discovered = 4566 #Kairwan
            has_discovered = 336 #Tlemcen
            any_owned_province = {
                region = maghreb_region
            }
		}
		effect = {
            create_conquistador = { tradition = 80 }
            fezzan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
    uukbo_fezzan_corridor = {
		icon = mission_mal_riches_of_trade
		required_missions = { uukbo_contact_maghreb }
		position = 8
		trigger = {
            fezzan_area = {
                type = all
                owned_by = ROOT
                is_core = ROOT 
            }
            2448 = {
                fort_level = 2
            }
		}
		effect = {
            2448 = {
                add_base_manpower = 2
                add_base_production = 2
                center_of_trade = 1
                add_province_modifier = {
                    name = uukbo_fortified_fezzan
                    duration = -1
                }
                if = {
                    limit = {
                        NOT = {
                            has_building = ramparts
                        }
                    }
                    add_building = ramparts
                } else_if = {
                    limit = {
                        NOT = {
                            has_building = tradecompany
                        }
                    }
                    add_building = tradecompany
                } else = {
                    add_dip_power = 100
                }
            }
            sus_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
            tafilalt_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
            north_saharan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
            ouled_nail_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
            hautes_plaines_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}  
}
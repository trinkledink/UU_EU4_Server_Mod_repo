#This file is necessary due to load order, so I can make use of column 3 rows 1-5 for DLC missions without overwriting the Vanilla mission at 3:6



emp_hab_develop_hungary_bohemia_branch = {
	slot = 3
	generic = no
	ai = yes
	
	potential_on_load = {
		has_dlc = "Emperor"
	}
	potential = {
		has_dlc = "Emperor"
		OR = {
			tag = HAB
			tag = AUH
		}
		NOT = { map_setup = map_setup_random }
	}
	
	has_country_shield = yes
	
	austrian_italian_ambition = {
		icon = mission_italian_condottiere
		position = 3
		completed_by = 1797.10.17
		
		ai_weight = {
			factor = 500
			modifier = {
				factor = 0.5
				venetia_area = {
					is_part_of_hre = yes
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
			}
			modifier = {
				factor = 2
				venetia_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		
		required_missions = {  }
		provinces_to_highlight = {
			area = venetia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			venetia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_mercantilism = 5
			add_country_modifier = {
				name = "uu_road_to_rome"	#UU change
				duration = 7300
			}
			if = {
				limit = {
					has_dlc = "Emperor"
				}
				if = {
					limit = {
						exists = MLO
						valid_for_personal_unions_trigger = yes
						MLO = {
							valid_for_personal_unions_trigger = yes
							num_of_cities = 3 #no point in taking an OPM
							owns = 104
						}
					}
					add_casus_belli = {
						type = cb_restore_personal_union
						months = 300
						target = MLO
					}
				}
				else = {
					lombardy_area = {
						limit = {
							NOT = { is_core = root }
							NOT = { is_permanent_claim = root }
						}
						add_permanent_claim = root
					}
					po_valley_area = {
						limit = {
							NOT = { is_core = root }
							NOT = { is_permanent_claim = root }
						}
						add_permanent_claim = root
					}
				}
			}
		}
	}
	
	emp_hab_veneto_lombardy = {
		icon = kingdom_of_lombardy

		position = 4
		
		ai_weight = {
			factor = 3
		}

		required_missions = { austrian_italian_ambition }
		provinces_to_highlight = {
			OR = {
				province_id = 104
				AND = {
					OR = {
						area = lombardy_area
						area = po_valley_area
					}
					ROOT = {
						NOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 5
								OR = {
									area = lombardy_area
									area = po_valley_area
								}
							}
						}
					}
				}
			}
			NOT = { country_or_non_sovereign_subject_holds = root }
		}
		trigger = {
			owns_or_non_sovereign_subject_of = 104
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				OR = {
					area = lombardy_area
					area = po_valley_area
				}
			}
		}
		effect = {
			add_prestige = 20
			add_imperial_influence = 25 ##UU added
			if = {
				limit = {
					exists = TTS
					valid_for_personal_unions_trigger = yes
					TTS = {
						valid_for_personal_unions_trigger = yes
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = TTS
				}
			}
			else_if = {
				limit = {
					exists = NAP
					valid_for_personal_unions_trigger = yes
					NAP = {
						valid_for_personal_unions_trigger = yes
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = NAP
				}
			}
			else = {
				naples_area = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
				apulia_area = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
				calabria_area = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
			}
		}
		ai_weight = {
			factor = 500	#Historical conquest
			modifier = {
				factor = 0	#Shadow Kingdom and Emperorship though
				is_emperor = yes
				NOT = { is_year = 1490 }
			}
		}
	}
	
	emp_hab_naples = {
		icon = union_with_naples

		position = 5
		
		ai_weight = {
			factor = 3
		}

		
		required_missions = { emp_hab_veneto_lombardy }
		provinces_to_highlight = {
			OR = {
				province_id = 121
				AND = {
					OR = {
						area = naples_area
						area = apulia_area
						area = calabria_area
					}
					ROOT = {
						NOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 8
								OR = {
									area = naples_area
									area = apulia_area
									area = calabria_area
								}
							}
						}
					}
				}
			}
			NOT = { country_or_non_sovereign_subject_holds = root }
		}
		trigger = {
			owns_or_non_sovereign_subject_of = 121
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8
				OR = {
					area = naples_area
					area = apulia_area
					area = calabria_area
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = hab_conquest_of_italy
				duration = 3650
			}
			italy_region = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
		}
		ai_weight = {
			factor = 500	#Historical conquest
		}
	}
	
	emp_hab_develop_hungary_bohemia = {
		icon = invest_in_the_provinces
		position = 6
		required_missions = { emp_hab_the_hungarian_question }
		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						area = erzgebirge_area
						area = bohemia_area
						area = moravia_area
						area = slovakia_area
						area = transdanubia_area
						area = alfold_area
					}
					OR = {
						NOT = { owned_by = root }
						NOT = { development = 10 }
					}
				}
				AND = {
					OR = {
						area = erzgebirge_area
						area = bohemia_area
						area = moravia_area
					}
					ROOT = {
						NOT = {
							any_owned_province = {
								OR = {
									area = erzgebirge_area
									area = bohemia_area
									area = moravia_area
								}
								development = 30
							}
						}
					}
				}
				AND = {
					OR = {
						area = slovakia_area
						area = transdanubia_area
						area = alfold_area
					}
					ROOT = {
						NOT = {
							any_owned_province = {
								OR = {
									area = slovakia_area
									area = transdanubia_area
									area = alfold_area
								}
								development = 30
							}
						}
					}
				}
			}
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 25 #all of them
				OR = {
					area = erzgebirge_area
					area = bohemia_area
					area = moravia_area
					area = slovakia_area
					area = transdanubia_area
					area = alfold_area
				}
				development = 10
			}
			any_owned_province = {
				OR = {
					area = erzgebirge_area
					area = bohemia_area
					area = moravia_area
				}
				development = 30
			}
			any_owned_province = {
				OR = {
					area = slovakia_area
					area = transdanubia_area
					area = alfold_area
				}
				development = 30
			}
		}
		effect = {
			add_country_modifier = {
				name = hab_invested_in_provinces
				duration = 10950
			}
		}
		ai_weight = {
			factor = 50	#Nice to have, but not important for the AI
		}
	}
}
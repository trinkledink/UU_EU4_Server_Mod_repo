uuhsa_free_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			AND = { 
				OR = {
					tag = BRU #Lower Saxons
					tag = LUN
					tag = CLB
					tag = HAN
					tag = POM #Pomeranians
					tag = RUG
					tag = WOL
					tag = STE
				}
				has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
			}
		}
	}
	has_country_shield = yes

	hsa_secure_salt_road = { #Lauenburg Luneburg
		icon = claim_the_borderlands
		required_missions = { }
		position = 1
		provinces_to_highlight = {
			OR = {
				province_id = 1857
				province_id = 53 
				province_id = 4772
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			1857 = { country_or_non_sovereign_subject_holds = ROOT }
			53 = { country_or_non_sovereign_subject_holds = ROOT }
			4772 = { country_or_non_sovereign_subject_holds = ROOT }
		}
		effect = {
			weser_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = hsa_lower_saxon_drittel_modifier 
				duration = 5475
			}
			custom_tooltip = hsa_hamburg_dev_per_member
			hidden_effect = {
				if = {
					limit = {
						HAM = { 
							is_in_trade_league_with = ROOT 
								has_opinion = {
								who = ROOT 
								value = 160 
							}
						}
						calc_true_if = {
							all_country = {
								is_in_trade_league_with = ROOT
							}
							amount = 6
						}
					}
					add_country_modifier = {
						name = hsa_development_works_of_the_hansa_modifier6
						duration = 5475 
					}
					every_country = {
						limit = { is_in_trade_league_with = ROOT }
						add_country_modifier = {
							name = hsa_development_works_of_the_hansa_modifier6
							duration = 5475 
						}
					}
				}
				else_if = {
					limit = {
						HAM = { 
							is_in_trade_league_with = ROOT 
								has_opinion = {
								who = ROOT 
								value = 160 
							}
						}
						calc_true_if = {
							all_country = {
								is_in_trade_league_with = ROOT
							}
							amount = 5
						}
					}
					add_country_modifier = {
						name = hsa_development_works_of_the_hansa_modifier5
						duration = 5475 
					}
					every_country = {
						limit = { is_in_trade_league_with = ROOT }
						add_country_modifier = {
							name = hsa_development_works_of_the_hansa_modifier5
							duration = 5475 
						}
					}
				}
				else_if = {
					limit = {
						HAM = { 
							is_in_trade_league_with = ROOT 
								has_opinion = {
								who = ROOT 
								value = 160 
							}
						}
						calc_true_if = {
							all_country = {
								is_in_trade_league_with = ROOT
							}
							amount = 4
						}
					}
					add_country_modifier = {
						name = hsa_development_works_of_the_hansa_modifier4
						duration = 5475 
					}
					every_country = {
						limit = { is_in_trade_league_with = ROOT }
						add_country_modifier = {
							name = hsa_development_works_of_the_hansa_modifier4
							duration = 5475 
						}
					}
				}
				else_if = {
					limit = {
						HAM = { 
							is_in_trade_league_with = ROOT 
								has_opinion = {
								who = ROOT 
								value = 160 
							}
						}
						calc_true_if = {
							all_country = {
								is_in_trade_league_with = ROOT
							}
							amount = 3
						}
					}
					add_country_modifier = {
						name = hsa_development_works_of_the_hansa_modifier3
						duration = 5475 
					}
					every_country = {
						limit = { is_in_trade_league_with = ROOT }
						add_country_modifier = {
							name = hsa_development_works_of_the_hansa_modifier3
							duration = 5475 
						}
					}
				}
				else_if = {
					limit = {
						HAM = { 
							is_in_trade_league_with = ROOT 
								has_opinion = {
								who = ROOT 
								value = 160 
							}
						}
						calc_true_if = {
							all_country = {
								is_in_trade_league_with = ROOT
							}
							amount = 2
						}
					}
					add_country_modifier = {
						name = hsa_development_works_of_the_hansa_modifier2
						duration = 5475 
					}
					every_country = {
						limit = { is_in_trade_league_with = ROOT }
						add_country_modifier = {
							name = hsa_development_works_of_the_hansa_modifier2
							duration = 5475 
						}
					}
				}
				else = {
					add_country_modifier = {
						name = hsa_development_works_of_the_hansa_modifier1
						duration = 5475 
					}
					every_country = {
						limit = { is_in_trade_league_with = ROOT }
						add_country_modifier = {
							name = hsa_development_works_of_the_hansa_modifier1
							duration = 5475 
						}
					}
				}
				if = {
					limit = {
						HAM = {
							is_in_trade_league_with = ROOT 
							owns = 44 
						}
					}
					44 = { change_trade_goods = salt }
				}
			}
		}
	}
	hsa_flow_trade = {
		icon = sources_of_trade 
		required_missions = { 
			hsa_secure_salt_road 
			hsa_hanseatic_army_mission
		}
		position = 2
		provinces_to_highlight = {
			area = weser_area 
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			OR = {
				weser_area = { country_or_non_sovereign_subject_holds = ROOT }
				AND = { 
					OLD = { is_in_trade_league_with = ROOT }
					BRE = { is_in_trade_league_with = ROOT }
					54 = { country_or_non_sovereign_subject_holds = ROOT }
					4771 = { country_or_non_sovereign_subject_holds = ROOT }
				}
			}
		}
		effect = {
			1876 = { #Rhineland
				add_trade_modifier = {
					who = ROOT
					duration = 7300
					power = 30
					key = hsa_secured_inland_trade
				}
			}
			add_years_of_income = 0.5 
			if = {
				limit =  {
					BRE = {
						is_in_trade_league_with = ROOT 
						owns = 1874 
					}
				}
				1874 = { add_center_of_trade_level = 1 }
				BRE = { add_mercantilism = 1 }
			}
			if = {
				limit = {
					FRN = { #Frankfurt
						is_in_trade_league_with = ROOT 
						owns = 1876 
					}
				}
				1876 = { #Frankfurt province
					add_province_modifier = {
						name = hsa_mercantile_stronghold_of_the_hansa_modifier
						duration = 9125
					}
				}
			}
			holstein_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	hsa_pen_sword = { #Schleswig Holstein
		icon = unite_the_realm
		required_missions = { hsa_flow_trade }
		position = 3 
		provinces_to_highlight = {
			area = holstein_area 
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			holstein_area = {
				type = all 
				OR = {
					country_or_non_sovereign_subject_holds = ROOT 
					owner = { is_in_trade_league_with = ROOT }
				}
			}
		}
		effect = {
			custom_tooltip = hsa_imperial_favor_tt
			hidden_effect = {
				if = {
					limit = {
						emperor = {
							has_opinion = {
								who = ROOT 
								value = 100 
							}
						}
					}
					1775 = { add_core = ROOT }
				}
			}
			add_country_modifier = {
				name = hsa_victory_in_holstein_modifier
				duration = 7300
			}
			if = {
				limit = {	
					DAN = {
						NOT = {
							has_opinion = {
								who = ROOT 
								value = 0 
							}
						}
					}
				}
				custom_tooltip = hsa_reduce_denmark_trade_tt 
				hidden_effect = {
					45 = { #Lubeck
						add_trade_modifier = {
							who = DAN
							duration = 3650
							power = -50
							key = hsa_submission_to_the_hansa
						}
					}
				}
			}
		}
	}

	hsa_bypass_sound_toll = {
		icon = mission_trade_with_cathay
		required_missions = { hsa_pen_sword }
		position = 4 
		provinces_to_highlight = {
			province_id = 12 
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			OR = {
				12 = { country_or_non_sovereign_subject_holds = ROOT }
				AND = {
					45 = {
						NOT = {
							trade_share = {
								country = DAN 
								share = 20
							}
						}
						is_strongest_trade_power = ROOT 
					}
					army_strength = { 
						who = DAN 
						value = 1.5 
					}
				}
			}
		}
		effect = {
			custom_tooltip = general_tooltip_dynamic_reward
			if = {
				limit = {
					12 = { owned_by = ROOT }
				}
				12 = { change_culture = ROOT }
			}
			if = {
				limit = {
					12 = { country_or_non_sovereign_subject_holds = ROOT }
				}
				12 = { add_center_of_trade_level = 1 }
			}
			else = {
				12 = { remove_province_modifier = sound_toll }
				45 = { 
					add_province_modifier = {
						name = sound_toll
						duration = -1
					}
				}
			}
			4163 = { add_permanent_claim = ROOT }
			17 = { add_permanent_claim = ROOT }
		}
	}

	hsa_seize_jutland_mission = {
		icon = mission_scandinavian_port_authority
		required_missions = { hsa_bypass_sound_toll }
		position = 6

		provinces_to_highlight = {
			OR = {
				area = holstein_area
				area = jutland_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 4
				OR = {
					area = jutland_area
					area = holstein_area
				}
			}
		}

		effect = {
			if = {
				limit = {
					exists = NOR
					NOT = { NOR = { is_subject = yes } }
				}
				add_casus_belli = {
					target = NOR
					type = cb_vassalize_mission
					months = 120
				}
			}
			else = {
				western_norway = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = ROOT
				}
				eastern_norway = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = ROOT
				}
				northern_norway = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = ROOT
				}
			}
			if = {
				limit = {
					exists = SWE
					NOT = { SWE = { is_subject = yes } }
				}
				add_casus_belli = {
					target = SWE
					type = cb_vassalize_mission
					months = 120
				}
			}
			add_mil_power = 50 
		}
	}
}

uuhsa_lock_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
		}
		NOT = { has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag }
	}
	has_country_shield = yes

	uuhsa_lock_c1r7 = {
		icon = mission_locked_mission
		required_missions = { hsa_seize_jutland_mission }
		position = 7
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c1r8 = {
		icon = mission_locked_mission
		required_missions = { uuhsa_lock_c1r7 }
		position = 8
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c1r9 = {
		icon = mission_locked_mission
		required_missions = { uuhsa_lock_c1r8 }
		position = 9
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c1r10 = {
		icon = mission_locked_mission
		required_missions = { uuhsa_lock_c1r9 }
		position = 10
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c1r11 = {
		icon = mission_locked_mission
		required_missions = { uuhsa_lock_c1r10 }
		position = 11
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}	
}

uuhsa_gated_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			tag = BRU #Lower Saxons
			tag = LUN
			tag = CLB
			tag = HAN
			tag = POM #Pomeranians
			tag = RUG
			tag = WOL
			tag = STE
		}
		has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
	}
	has_country_shield = yes

	hsa_herring_migration = {
		icon = mission_rb_cod_wars 
		required_missions = { hsa_seize_jutland_mission }
		position = 7 
		provinces_to_highlight = {
			OR = {
				province_id = 6 
				province_id = 45 
			}
		}
		trigger = {
			OR = {
				45 = { 
					higher_development_than = 6 
					OR = {
						has_building = workshop 
						has_building = counting_house 
					}
					development = 25 
				}
				6 = {
					country_or_non_sovereign_subject_holds = ROOT 
					OR = {
						has_building = workshop 
						has_building = counting_house 
					}
					num_of_times_improved = 5
				}
			}
		}
		effect = {
			if = {
				limit = {
					6 = { country_or_non_sovereign_subject_holds = ROOT }
				}
				6 = { 
					if = {
						limit = {
							NOT = { has_building = counting_house }
						}
						remove_building = workshop 
						add_building = counting_house 
					}
					else = { add_base_production = 2 }
				}
			}
			else = {
				country_event = { id = flavor_hsa.6 } #flavor_hsa.6
			}
			custom_tooltip = general_tooltip_dynamic_reward
		}
	}

	hsa_subjugate_norway_mission = {
		icon = mission_seize_north_sea_trade
		required_missions = { hsa_herring_migration }
		position = 8

		provinces_to_highlight = {
			OR = {
				province_id = 17
				province_id = 23
				province_id = 20
			}
			NOT = { country_or_non_sovereign_subject_holds = root }
			NOT = {
				owner = {
					is_in_trade_league_with = root
				}
			}
		}
		
		trigger = {
			if = {
				limit = { has_dlc = "Mare Nostrum" }
				17 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						owner = {
							is_in_trade_league_with = root
						}
					}
				}
				23 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						owner = {
							is_in_trade_league_with = root
						}
					}
				}
				20 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						owner = {
							is_in_trade_league_with = root
						}
					}
				}
			}
			else = {
				17 = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				23 = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				20 = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}

		effect = {
			add_prestige = 20
			if = {
				limit = {
					NOR = { is_subject_of = root }
				}
				add_mil_power = 100
			}
			else = {
				custom_tooltip = bre_ham_nat_prod_nor_prov_tt
				hidden_effect = { 
					every_owned_province = {
						limit = { culture = norwegian }
						add_nationalism = -5
						add_base_production = 1 
					}
				}
			}

			subarctic_islands_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = ROOT
			}
			248 = { #Lothian
				if = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
			}
			249 = { #Ayr
				if = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
			}
		}
	}

	hsa_north_sea_trade_mission = {
		icon = mission_look_west
		required_missions = { hsa_subjugate_norway_mission }
		position = 9 

		provinces_to_highlight = {
			province_id = 1975
		}

		trigger = {
			1975 = {
				is_strongest_trade_power = root
			}
		}

		effect = {
			add_country_modifier = {
				name = hsa_north_sea_trading
				duration = 7300
			}
			add_navy_tradition = 15
			create_explorer = {
				tradition = 60
			}
		}
	}

	hsa_charter_north_america = { #combination of two missions
		icon = mission_caribbean_cn
		required_missions = { hsa_north_sea_trade_mission }
		position = 10
		provinces_to_highlight = {
			area = newfoundland_area
			has_discovered = root
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			exploration_ideas = 1
			navy_size = 50
			newfoundland_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = { 
				name = hsa_new_world_ambitions_modifier
				duration = 10950 
			}
			newfoundland_area = { add_base_production = 2 }
			add_mercantilism = 5
		}
	}

	hsa_new_lubeck_mission = { #Stardust Voyagers, apparently 
		icon = mission_rb_the_thirteen_colonies
		required_missions = { hsa_charter_north_america }
		position = 11

		provinces_to_highlight = {
			OR = {
				AND = {
					province_id = 965 # Manhattan
					NOT = {
						owner = {
							is_colonial_nation_of = root
						}
					}
				}
				AND = {
					colonial_region = colonial_eastern_america
					NOT = {
						ROOT = {
							any_subject_country = {
								is_colonial_nation = yes
								num_of_cities = 10
								any_owned_province = {
									colonial_region = colonial_eastern_america
								}
							}
						}
					}
					OR = {
						has_port = yes
						any_neighbor_province = {
							country_or_non_sovereign_subject_holds = root
						}
					}
				}
			}
			has_discovered = root
		}
	
		trigger = {
			965 = {
				owner = {
					is_colonial_nation_of = root
					num_of_cities = 10
				}
			}
		}

		effect = {
			add_country_modifier = {
				name = new_lubeck_modifier
				duration = 7300	
			}
			965 = {
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
			}
			if = {
				limit = {
					OR = {
						tag = HAM
						tag = HAN
					}
				}
				965 = {
					change_province_name = "New Hamburg"
					rename_capital = "New Hamburg"
				}
			} else_if = {
				limit = {
					tag = BRE 
				}
				965 = {
					change_province_name = "New Bremen"
					rename_capital = "New Hamburg"
				}
			} else = {
				965 = {
					change_province_name = "New Lubeck"
					rename_capital = "New Lubeck"
				}				
			}
		}
	}
}

uuhsa_free_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			AND = { 
				OR = {
					tag = BRU #Lower Saxons
					tag = LUN
					tag = CLB
					tag = HAN
					tag = POM #Pomeranians
					tag = RUG
					tag = WOL
					tag = STE
				}
				has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
			}
		}
	}
	has_country_shield = yes
	
	hsa_hanseatic_army_mission = {
		icon = defend_the_city
		required_missions = { }
		position = 1

		trigger = {
			army_size = 12
			army_size_percentage = 1
		}

		effect = {
			mecklenburg_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if =  {
				limit = { 
					has_dlc = "Rights of Man"
					NOT = { num_of_ruler_traits = { amount = 3 } }
				}
				add_ruler_personality = inspiring_leader_personality
			} 
			else = { add_army_tradition = 10 } 
		}
	}

	hsa_grinning_steers_head = {
		icon = protect_against_austria 
		required_missions = { hsa_hanseatic_army_mission }
		position = 2 
		provinces_to_highlight = {
			area = mecklenburg_area 
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			OR = {
				AND = {
					development_in_provinces = {
						value = 35 
						area = mecklenburg_area 
					}
					2996 = { country_or_non_sovereign_subject_holds = ROOT }
					46 = { country_or_non_sovereign_subject_holds = ROOT }
				}
				mecklenburg_area = {
					type = all 
					country_or_non_sovereign_subject_holds = ROOT 
				}
			}
		}
		effect = {
			create_general = { tradition = 50 }
			hinter_pommern_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			vorpommern_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			mecklenburg_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_devastation = -20
			}
		}
	}
	
	hsa_along_sea = {
		icon = mission_hanseatic_city 
		required_missions = { hsa_grinning_steers_head }
		position = 3
		provinces_to_highlight = {
			OR = {
				area = hinter_pommern_area
				area = vorpommern_area 
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			OR = {
				AND = {
					hinter_pommern_area = {
						type = all 
						country_or_non_sovereign_subject_holds = ROOT 
					}
					vorpommern_area = {
						type = all 
						country_or_non_sovereign_subject_holds = ROOT 
					}
				}
				AND = { 
					47 = {
						country_or_non_sovereign_subject_holds = ROOT 
						num_of_times_improved = 4 
						province_has_center_of_trade_of_level = 2
					}
					1858 = {
						country_or_non_sovereign_subject_holds = ROOT 
						num_of_times_improved = 4 
					}
				}
			}
		}
		effect = {
			custom_tooltip = hsa_permanent_mod_if_50_trade_in_lubeck
			if = {
				limit = {
					NOT = {
						45 = { #Lubeck
							trade_share = {
								country = ROOT
								share = 50
							}
						}
					}
				}
				add_country_modifier = {
					name = hsa_secured_pomeranian_coast_modifier
					duration = 7300
				}
			}
			else = {
				add_country_modifier = {
					name = hsa_secured_pomeranian_coast_modifier
					duration = -1
				}
			}
			add_mercantilism = 3 
			43 = { #Danzig
				if = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
			}
		}
	}

	hsa_induct_danzig_ports = {
		icon = capture_adriatic_ports 
		required_missions = { hsa_along_sea }
		position = 5 
		provinces_to_highlight = {
			province_id = 43
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			43 = { country_or_non_sovereign_subject_holds = ROOT }
			OR = {
				faction_influence = {
					faction = mr_traders
					influence = 75
				}
				43 = { development = 25 }
			}
		}
		effect = {
			country_event = { id = flavor_hsa.9 } #flavor_hsa.9
			west_prussia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			east_prussia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}			
		}
	}
	
	hsa_royal_prussia = {
		icon = tame_brandenburg 
		required_missions = { hsa_induct_danzig_ports }
		position = 6 
		provinces_to_highlight = { 
			OR = {
				area = east_prussia_area 
				area = west_prussia_area 
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			west_prussia_area = {
				type = all 
				country_or_non_sovereign_subject_holds = ROOT 
			}
			east_prussia_area = {
				type = all 
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		effect = {
			west_prussia_area = { add_base_production = 1 }
			east_prussia_area = { add_base_production = 1 }
			add_accepted_culture = prussian 
			25 = { #Gotland
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			38 = { #Riga
				if = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}
}

uuhsa_lock_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
		}
		NOT = { has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag }
	}
	has_country_shield = yes

		uuhsa_lock_c2r7 = {
		icon = mission_locked_mission
		required_missions = { hsa_royal_prussia }
		position = 7
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c2r8 = {
		icon = mission_locked_mission
		required_missions = { uuhsa_lock_c2r7 }
		position = 8
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c2r9 = {
		icon = mission_locked_mission
		required_missions = { uuhsa_lock_c1r8 }
		position = 9
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c2r10 = {
		icon = mission_locked_mission
		required_missions = { 
			uuhsa_lock_c1r9 
			uuhsa_lock_c2r9 
		}
		position = 10
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
}

uuhsa_gated_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			tag = BRU #Lower Saxons
			tag = LUN
			tag = CLB
			tag = HAN
			tag = POM #Pomeranians
			tag = RUG
			tag = WOL
			tag = STE
		}
		has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
	}
	has_country_shield = yes
	
	hsa_gateway_to_east = { #Riga
		icon = mission_develop_nevas_port
		required_missions = { hsa_royal_prussia }
		position = 7 
		provinces_to_highlight = { 
			province_id = 38 
		}
		trigger = {
			OR = {
				38 = { country_or_non_sovereign_subject_holds = ROOT }
				AND = {
					RIG = {
						is_in_trade_league_with = ROOT 
						has_opinion = {
							who = ROOT 
							value = 125 
						}
					}
					army_size = 8 
				}
			}
		}
		effect = {
			38 = { add_base_production = 2 }
			if = {
				limit = {
					RIG = { is_in_trade_league_with = ROOT }
				}
				add_dip_power = 50 
				add_mercantilism = 1 
			}
			if = {
				limit = {
					RIG = {
						is_in_trade_league_with = ROOT 
						has_opinion = {
							who = ROOT 
							value = 125 
						}
					}
					hre_size = 1
				}
				RIG = { set_in_empire = yes }
			}
		}
	}
	
	hsa_st_peterhof_depot = { #Novgorod/Neva
		icon = explore_caribbean
		required_missions = { hsa_gateway_to_east }
		position = 8 
		provinces_to_highlight = { 
			province_id = 310 
		}
		trigger = {
			310 = {
				OR = {
					AND = {
						country_or_non_sovereign_subject_holds = ROOT
						num_of_times_improved = 4 
						has_province_modifier = trade_post_modifier 
					} 
					owner = {
						alliance_with = ROOT 
						has_opinion = {
							who = ROOT 
							value = 125 
						}
					}
					AND = { 
						NOT = { country_or_non_sovereign_subject_holds = ROOT }
						owner = {
							is_in_trade_league_with = ROOT
						}
					}
				}
				trade_share = {
					country = ROOT 
					share = 30
				}
			}
		}
		effect = {
			country_event = { id = flavor_hsa.5 } #flavor_hsa.5
			add_mercantilism = 5
			add_legitimacy = 10 
			add_republican_tradition = 5 
			add_devotion = 10 
			add_horde_unity = 10 
			custom_tooltip = hsa_every_league_member_wealth_tt
			hidden_effect = {
				every_country = {
					limit = { is_in_trade_league_with = ROOT }
					add_country_modifier = {
						name = hsa_wealth_of_the_hansa_modifier
						duration = 3650 
					}
					capital_scope = {
						random_list = {
							40 = {
								add_base_tax = 1 
							}
							50 = {
								add_base_production = 1 
							}
							10 = {
								add_base_manpower = 1 
							}
						}
					}
				}
			}
		}
	}

	hsa_edinburgh_mission = {
		icon = mission_rb_the_bank_of_scotland
		required_missions = { hsa_subjugate_norway_mission }
		position = 9

		provinces_to_highlight = {
			OR = {
				province_id = 248
				province_id = 249
			}
			NOT = { country_or_non_sovereign_subject_holds = root }
			NOT = {
				owner = {
					is_in_trade_league_with = root
				}
			}
		}

		trigger = {
			if = {
				limit = { has_dlc = "Mare Nostrum" }
				248 = {
					OR = {
						country_or_non_sovereign_subject_holds = root
						owner = { is_in_trade_league_with = root }
					}
				}
				249 = {
					OR = {
						country_or_non_sovereign_subject_holds = root
						owner = { is_in_trade_league_with = root }
					}
				}
			}
			else = {
				248 = { country_or_non_sovereign_subject_holds = root }
				249 = { country_or_non_sovereign_subject_holds = root }
			}
		}

		effect = {
			add_prestige = 20
			if = {
				limit = {
					exists = SCO
					SCO = {
						is_subject = no
						NOT = { is_in_trade_league_with = root }
					}
				}
				add_casus_belli = {
					target = SCO
					type = cb_vassalize_mission
					months = 120
				}
			}
			236 = { #London
				if = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
			}
			custom_tooltip = bre_ham_sep_prod_scot_tt
			hidden_effect = {
				every_owned_province = {
					limit = { 
						OR = {
							culture = highland_scottish
							culture = scottish
						}
					}
					add_nationalism = -5
					add_base_production = 1 
				}
			}
		}
	}

	hsa_london_steelyard_mission = {
		icon = the_london_steelyard
		position = 10
		required_missions = { 
			hsa_edinburgh_mission
			hsa_north_sea_trade_mission
		}

		provinces_to_highlight = {
			province_id = 236
		}

		trigger = {
			if = {
				limit = { has_dlc = "Mare Nostrum" }
				236 = {
					OR = {
						country_or_non_sovereign_subject_holds = root
						owner = { is_in_trade_league_with = root }
					}
				}
			}
			else = {
				236 = {
					country_or_non_sovereign_subject_holds = root
				}
			}
		}

		effect = {
			add_dip_power = 100
			236 = {
				add_trade_modifier = {
					who = root
					duration = -1
					power = 30
					key = hsa_london_steelyard
				}
			}
		}
	}	
}

uuhsa_free_3a = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			AND = { 
				OR = {
					tag = BRU #Lower Saxons
					tag = LUN
					tag = CLB
					tag = HAN
					tag = POM #Pomeranians
					tag = RUG
					tag = WOL
					tag = STE
				}
				has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
			}
		}
	}
	has_country_shield = yes
	
	hsa_double_entry_bookkeeping = {
		icon = medici_bank_ledgers
		required_missions = { hsa_merchant_navy_mission }
		position = 2
		trigger = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = hsa_trigger_4_tt
					any_ally = { 
						culture_group = latin
						has_institution = renaissance 
						has_opinion = {
							who = ROOT 
							value = 125 
						}
					}
				}
				capital_scope = {
					renaissance = 100 
					development = 30 
				}
				has_idea = the_hansa_bank
			}
		}
		effect = {
			define_advisor = {
				type = treasurer
				skill = 3 
				cost_multiplier = 0.3
			}
			add_adm_power = 100 
		}
	}

	hsa_build_lubeck_krantor_mission = {
		icon = mission_danzig_or_war
		required_missions = { 
			hsa_double_entry_bookkeeping 
			hsa_hanseatic_shipwrights_mission 
		}
		position = 3
		
		trigger = {
			num_of_merchants = 4
			years_of_income = 3
		}

		effect = {
			capital_scope = {
				add_province_triggered_modifier = krantor_crane
				add_province_modifier = { 
					name = capital_expansion_modifier
					duration = 3650 
				}
			}
		}
	}

	hsa_queen_of_the_league_mission = {
		icon = mission_heart_of_the_hansa
		required_missions = { 
			hsa_build_lubeck_krantor_mission 
			hsa_adler_von_lubeck_mission 
			hsa_along_sea
		}
		position = 4
		provinces_to_highlight = { is_capital_of = ROOT } 
		trigger = {
			capital_scope = {
				development = 30
				if = {
					limit = { has_dlc = "Dharma" }
					OR = { 
						province_has_center_of_trade_of_level = 3
						AND = { 
							has_manufactory_trigger = yes 
							has_trade_building_trigger = yes
							province_trade_power = 35 
						}
					}
				}
				else = {
					num_of_buildings_in_province = 5
					has_manufactory_trigger = yes 
					has_trade_building_trigger = yes
					province_trade_power = 25
				}
			}
		}
		
		effect = {
			add_country_modifier = {
				name = hanseatic_queen_modifier
				duration = -1
			}
		}
	}

	hsa_dominate_commerce_mission = {
		icon = mission_african_gold
		required_missions = { 
			hsa_queen_of_the_league_mission  
			hsa_bypass_sound_toll
		}
		position = 5
		provinces_to_highlight = { 
			province_id = 45
		}
		trigger = {
			45 = {
				trade_share = {
					country = ROOT
					share = 70
				}
			}
			if = {
				limit = {
					has_dlc = "Mare Nostrum"
					is_trade_league_leader = yes
				}
				calc_true_if = {
					desc = advance_our_interests.tooltip
					all_known_country = { is_in_trade_league_with = ROOT }
					amount = 7 # 8 members include Lubeck
				}
			}
			else = {
				total_development = 100
			}
		}
		
		effect = {
			add_country_modifier = {
				name = "hsa_advance_our_interests_modifier"
				duration = 10950
			}
		}
	}

	hsa_unite_hanseatic_league_mission = {
		icon = unite_the_league
		position = 6
		required_missions = { hsa_dominate_commerce_mission }

		provinces_to_highlight = {
			NOT = { has_dlc = "Mare Nostrum" }
			OR = {
				province_id = 25		# Gotland
				province_id = 38		# Riga 
				province_id = 43		# Danzig
				province_id = 44		# Hamburg
				province_id = 53		# Luneburg
				province_id = 85		# Koln
				province_id = 92		# Brussels
				province_id = 98		# Utrecht 
				province_id = 1744		# Antwerpen
				province_id = 1858		# Stettin 
				province_id = 1874		# Bremen
				province_id = 4382		# Groningen
			}
		}

		trigger = {
			OR = {
				is_great_power = yes 
				AND = {
					monthly_dip = 12
					grown_by_development = 200
					power_projection = 50 
					republican_tradition = 85
				}
			}
		}

		effect = {
			if = {
				limit = {
					has_dlc = "Mare Nostrum"
				}
				every_country = {
					limit = { is_in_trade_league_with = root }
					ROOT = { vassalize = PREV }
					add_historical_friend = ROOT
					hidden_effect = { country_event = { id = emp_mission_events.14 } }
				}
			}
			else = {
				custom_tooltip = hsa_united_league.tooltip
				every_country = {
					limit = {
						if = {
							limit = { NOT = { has_dlc = "Mare Nostrum" } }
							alliance_with = ROOT
							num_of_cities  = 1
						}
						else = {
							is_in_trade_league_with = ROOT
							ROOT = { is_trade_league_leader = yes }
						}
						is_at_war = no
						OR = {
							capital = 25
							capital = 38
							capital = 43
							capital = 44
							capital = 53
							capital = 85
							capital = 92
							capital = 98
							capital = 1744
							capital = 1858
							capital = 1874
							capital = 4382
						}
					}
					ROOT = { vassalize = PREV }
					add_historical_friend = ROOT
					hidden_effect = { country_event = { id = emp_mission_events.14 } }
				}
				if = {
					limit = {
						NOT = {
							calc_true_if = {
								all_country = {
										if = {
											limit = { NOT = { has_dlc = "Mare Nostrum" } }
											alliance_with = ROOT
											num_of_cities  = 1
										}
										else = {
											is_in_trade_league_with = ROOT
											ROOT = { is_trade_league_leader = yes }
										}
										is_at_war = no
										OR = {
											capital = 25
											capital = 38
											capital = 43
											capital = 44
											capital = 53
											capital = 85
											capital = 92
											capital = 98
											capital = 1744
											capital = 1858
											capital = 1874
											capital = 4382
										}
								}
								amount = 1
							}
						}
					}
					custom_tooltip = hsa_united_league_no_valid_targets.tooltip
				}
			}
			custom_tooltip = hsa_diplomatic_upkeep_boost_tt
			hidden_effect = { #From the LotN hansa tree. 30 years changed to 25 years
				if = { 
					limit = { num_of_non_tributary_subjects = 6 }
					add_country_modifier = {
						name = hsa_northern_alliance_of_trade_cities6_modifier
						duration = 9125 
					}
				}
				else_if = {
					limit = { num_of_non_tributary_subjects = 5 }
					add_country_modifier = {
						name = hsa_northern_alliance_of_trade_cities5_modifier
						duration = 9125 
					}
				}
				else_if = {
					limit = { num_of_non_tributary_subjects = 4 }
					add_country_modifier = {
						name = hsa_northern_alliance_of_trade_cities4_modifier
						duration = 9125 
					}
				}	
				else_if = {
					limit = { num_of_non_tributary_subjects = 3 }
					add_country_modifier = {
						name = hsa_northern_alliance_of_trade_cities3_modifier
						duration = 9125 
					}
				}
				else_if = {
					limit = { num_of_non_tributary_subjects = 2 }
					add_country_modifier = {
						name = hsa_northern_alliance_of_trade_cities2_modifier
						duration = 9125 
					}
				}
				else = {
					add_country_modifier = {
						name = hsa_northern_alliance_of_trade_cities1_modifier
						duration = 9125 
					}
				}
			}
			if = {
				limit = {
					NOT = { has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag }
				}
				override_country_name = UUHSA
				custom_tooltip = uuhsa_easier_decision_tt
				hidden_effect = {
					set_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
					swap_non_generic_missions = yes
				}
			}
		}
	}
}

uuhsa_lock_3a = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
		}
		NOT = { has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag }
	}
	has_country_shield = yes

	uuhsa_lock_c3r7 = {
		icon = mission_locked_mission
		required_missions = { 
			hsa_royal_prussia 
			hsa_unite_hanseatic_league_mission
		}
		position = 7
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c3r8 = {
		icon = mission_locked_mission
		required_missions = { 
			uuhsa_lock_c2r7 
			uuhsa_lock_c3r7 
		}
		position = 8
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
}

uuhsa_gated_3a = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			tag = BRU #Lower Saxons
			tag = LUN
			tag = CLB
			tag = HAN
			tag = POM #Pomeranians
			tag = RUG
			tag = WOL
			tag = STE
		}
		has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
	}
	has_country_shield = yes
	
	hsa_restore_visby = {
		icon = return_visby_to_the_league
		required_missions = { 
			hsa_unite_hanseatic_league_mission 
			hsa_royal_prussia
		}
		position = 7 
		provinces_to_highlight = { 
			province_id = 25 
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			OR = {
				AND = { 
					GOT = { 
						is_in_trade_league_with = ROOT 
						has_opinion = {
							who = ROOT 
							value = 150 
						}
					}
				}
				25 = { country_or_non_sovereign_subject_holds = ROOT } 
			}
			if = { 
				limit = { 
					25 = { country_or_non_sovereign_subject_holds = ROOT } 
				}
				25 = {
					OR = {
						base_production = 7 
						province_has_center_of_trade_of_level = 2 
					}
				}
			}
		}
		effect = { 
			country_event = { id = flavor_hsa.8 } #flavor_hsa.8
		}
	}

	hsa_baltic_trade_mission = {
		icon = mission_develop_nevas_port
		required_missions = { 
			hsa_gateway_to_east
			hsa_restore_visby
		}
		position = 8
	
		provinces_to_highlight = {
			province_id = 1926 # Baltic Sea
		}
	
		trigger = {
			1926 = {
				trade_share = {
					country = ROOT
					share = 60
				}
			}
		}
	
		effect = {
			add_country_modifier = {
				name = "hsa_baltic_trade_modifier"
				duration = 10650
			}
		}
	}
}

uuhsa_free_3b = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			AND = { 
				OR = {
					tag = BRU #Lower Saxons
					tag = LUN
					tag = CLB
					tag = HAN
					tag = POM #Pomeranians
					tag = RUG
					tag = WOL
					tag = STE
				}
				has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
			}
		}
	}
	has_country_shield = yes

	hsa_finance_guilds = {
		icon = mission_state_manufactories 
		required_missions = { hsa_expand_market_square }
		position = 9
		trigger = {
			capital_scope = {
				OR = {
					has_building = workshop
					has_building = counting_house
				}
			}
			OR = {
				economic_ideas = 2 
				trade_ideas = 2 
				capital_scope = { base_production = 15 }
			}
			OR = {
				faction_influence = {
					faction = mr_guilds 
					influence = 50
				}
				years_of_income = 1 
			}
		}
		effect = {
			add_country_modifier = {
				name = hsa_shipwrights_naval_expansion_modifier 
				duration = 7300 
			}
			add_years_of_income = 1
		}
	}
}

uuhsa_lock_3b = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
		}
		NOT = { has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag }
	}
	has_country_shield = yes
	uuhsa_lock_c3r10 = {
		icon = mission_locked_mission
		required_missions = { 
			hsa_finance_guilds
		}
		position = 10
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c3r11 = {
		icon = mission_locked_mission
		required_missions = { uuhsa_lock_c3r10 }
		position = 11
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
}

uuhsa_gated_3b = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			tag = BRU #Lower Saxons
			tag = LUN
			tag = CLB
			tag = HAN
			tag = POM #Pomeranians
			tag = RUG
			tag = WOL
			tag = STE
		}
		has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
	}
	has_country_shield = yes

	hsa_tend_towns = {
		icon = renovate_berlin
		required_missions = { hsa_finance_guilds }
		position = 10 
		provinces_to_highlight = {
			owned_by = ROOT 
			OR = {	
				devastation = 1 
				unrest = 1 
				NOT = { development = 10 }
			}
		}
		trigger = { 
			share_of_starting_income = 5
			grown_by_development = 50
			all_owned_province = {
				development = 10 
				NOT = { unrest = 1 }
				NOT = { devastation = 1 }
			}
		}
		effect = {
			add_country_modifier = {
				name = hsa_strong_mercantile_union_modifier
				duration = 10950 
			}
			custom_tooltip = hsa_every_league_member_gets_prosperity_and_25_trust_towards_you_tt
			hidden_effect = {
				every_country = {
					limit = { is_in_trade_league_with = ROOT }
					capital_scope = { add_prosperity = 100 }
					add_trust = {
						who = ROOT 
						value = 25 
						mutual = yes 
					}
				}
			}
		}
	}
	hsa_develop_mineral_trade = {
		icon = mission_establish_mint_towns 
		required_missions = { hsa_tend_towns } 
		position = 11 
		provinces_to_highlight = {
			province_id = 4742
		}
		trigger = {
			OR = {
				adm = 6 
				full_idea_group = economic_ideas 
				has_final_tier_reforms_trigger = yes
			}
			custom_trigger_tooltip = {
				tooltip = hsa_trigger_2_tt
				OR = {
					any_ally = {
						any_owned_province = { 
							trade_goods = gold 
						}
						has_opinion = {
							who = ROOT 
							value = 150 
						}
					}
					any_owned_province = {
						trade_goods = gold 
						base_production = 6
					}
					4742 = {
						owner = {
							OR = {
								AND = {
									alliance_with = ROOT 
									has_opinion = {
										who = ROOT 
										value = 150 
									}
								}
								AND = {
									is_in_trade_league_with = ROOT 
									has_opinion = {
										who = ROOT 
										value = 150 
									}
								}
							}
						}
					}
				}
			}
		}
		effect = {
			if = {
				limit = {
					4742 = {
						owner = {
							OR = {
								AND = { 				#Goslar's owner is our ally with 150 opinion
									alliance_with = ROOT 
									has_opinion = {
										who = ROOT 
										value = 150 
									}
								}
								AND = {					#Goslar's owner is in our trade league with 150 opinion
									is_in_trade_league_with = ROOT 
									has_opinion = {
										who = ROOT 
										value = 150 
									}
								}
							}
						}
					}
				}
				4742 = { 
					change_trade_goods = gold 
					add_base_production = 2
				}
			}
			random_owned_province = {
				limit = { trade_goods = gold }
				add_base_production = 2
			}
			random_ally = {
				limit = {
					any_owned_province = { trade_goods = gold }
				}
				random_owned_province = {
					limit = { trade_goods = gold }
					add_base_production = 2
				}
			}
			add_country_modifier = {
				name = hsa_valuable_mineral_abundance_modifier
				duration = 9125
			}
			custom_tooltip = general_tooltip_dynamic_reward
		}
	}
}

uuhsa_free_4a = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			AND = { 
				OR = {
					tag = BRU #Lower Saxons
					tag = LUN
					tag = CLB
					tag = HAN
					tag = POM #Pomeranians
					tag = RUG
					tag = WOL
					tag = STE
				}
				has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
			}
		}
	}
	has_country_shield = yes
	
	hsa_merchant_navy_mission = {
		icon = mission_corsairs_of_the_north_sea
		required_missions = {  }
		position = 1

		trigger = {
			num_of_light_ship = 15
		}

		effect = {
			add_country_modifier = {
				name = hanseatic_merchant_navy_modifier
				duration = 9125			
			}
			if =  {
				limit = { 
					has_dlc = "Rights of Man"
					NOT = { num_of_ruler_traits = { amount = 3 } }
				}
				add_ruler_personality = entrepreneur_personality
			} 
			else = { add_navy_tradition = 10 } 
		}
	}

	hsa_hanseatic_shipwrights_mission = {
		icon = mission_aragonese_navy
		required_missions = { hsa_merchant_navy_mission }
		position = 2

		provinces_to_highlight = {
			OR = {
				AND = {
					is_capital_of = ROOT
					OR = {
						NOT = { owned_by = root }
						has_shipyard_building_trigger = no
					}
				}
				AND = {
					owned_by = root
					has_port = yes
					has_shipyard_building_trigger = no
					root = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 5
								OR = {
									has_building = shipyard
									has_building = grand_shipyard
								}
							}
						}
					}
				}
			}
		}

		trigger = {
			capital_scope = { 
				OR = {
					has_building = shipyard
					has_building = grand_shipyard
				}
			}
			num_of_owned_provinces_with = {
				value = 5
				OR = {
					has_building = shipyard
					has_building = grand_shipyard
				}
			}
		}

		effect = {
			capital_scope = { 
				add_province_modifier = {
					name = "hanseatic_shipwrights_modifier"
					duration = -1
				}
			}
		}
	}
	
	hsa_adler_von_lubeck_mission = {
		icon = mission_launch_a_flagship
		required_missions = { hsa_hanseatic_shipwrights_mission }
		position = 3

		provinces_to_highlight = {
			is_capital = yes
			owner = {
				NOT = { tag = root }
				any_owned_province = {
					sea_zone = {
						OR = {
							region = baltic_region
							area = north_sea_area
						}
					}
				}
				num_of_heavy_ship = root
			}
		}

		trigger = {
			if = { 
				limit = { has_dlc = "Golden Century" } 
				OR = { 
					has_flagship = yes 
					custom_trigger_tooltip = {
						tooltip = adler_von_lubeck.tooltip
						has_country_flag = adler_built
					}
				}
				num_of_heavy_ship = 10 
			}
			else = { num_of_heavy_ship = 10 }
			custom_trigger_tooltip = {
				tooltip = adler_von_lubeck_supreme.tooltip
				NOT = {
					any_country = {
						any_owned_province = {
							sea_zone = {
								OR = {
									region = baltic_region
									area = north_sea_area
								}
							}
						}
						num_of_heavy_ship = root
					}
				}
			}
			navy_size_percentage = 0.95
		}

		effect = {
			add_country_modifier = {
				name = adler_von_lubeck_modifier
				duration = 7300
			}
		}
	}
}

uuhsa_lock_4a = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
		}
		NOT = { has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag }
	}
	has_country_shield = yes

	uuhsa_lock_c4r5 = {
		icon = mission_locked_mission
		required_missions = { hsa_adler_von_lubeck_mission }
		position = 5
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c4r6 = {
		icon = mission_locked_mission
		required_missions = { uuhsa_lock_c4r5 }
		position = 6
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c4r7 = {
		icon = mission_locked_mission
		required_missions = { hsa_unite_hanseatic_league_mission }
		position = 7
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
}

uuhsa_gated_4a = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			tag = BRU #Lower Saxons
			tag = LUN
			tag = CLB
			tag = HAN
			tag = POM #Pomeranians
			tag = RUG
			tag = WOL
			tag = STE
		}
		has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
	}
	has_country_shield = yes
	
	hsa_schiffbauer_gilde = {
		icon = renaissance_city
		required_missions = { hsa_adler_von_lubeck_mission }
		position =  5
		provinces_to_highlight = { province_id = 45 }
		trigger = {
			45 = {
				OR = {
					has_building = shipyard 
					has_building = grand_shipyard 
				}
				base_production = 10
			}
			if = {
				limit = {
					45 = { trade_goods = naval_supplies }
				}
				45 = {
					OR = {
						has_manufactory_trigger = yes 
						#has_building = workshop 
						has_building = counting_house 
					}
				}
			}
			else = { 
				OR = {
					faction_influence = {
						faction = mr_guilds 
						influence = 50
					}
					years_of_income = 1 
				}
			}
		}
		effect = {
			if = {
				limit = {
					capital_scope = { 
						has_port = yes
						has_building = shipyard 
						NOT = { has_building = grand_shipyard }
					}
				}
				capital_scope = {
					remove_building = shipyard 
					add_building = grand_shipyard 
				}
			}
			custom_tooltip = hsa_every_league_member_gets_this_reward_tt
			hidden_effect = {
				every_country = {
					limit = {
						is_in_trade_league_with = ROOT 
						capital_scope = { has_port = yes }
						NOT = { has_building = grand_shipyard }
						NOT = { has_building = shipyard }
					}
					capital_scope = { add_building = shipyard }
				}
				every_country = {
					limit = {
						any_owned_province = { has_port = yes }
						is_in_trade_league_with = ROOT 
					}
					add_country_modifier = {
						name = hsa_shipwrights_naval_expansion_modifier 
						duration = 7300 
					}
				}
			}
			# country_event = { id = flavor_hsa.13 } #Cog event moved
		}
	}
	hsa_expand_admiralty = {
		icon = imperial_navy
		required_missions = { hsa_schiffbauer_gilde }
		position = 6 
		trigger = {
			navy_size_percentage = 1 
			naval_maintenance = 1 
			num_of_galley = 15
			num_of_admirals = 1
			OR = {
				naval_reformer = 1 
				45 = {
					owned_by = ROOT 
					OR = {
						has_building = dock 
						has_building = drydock 
					}
				}
			}
		}
		effect = {
			add_navy_tradition = 15 
			create_admiral = {
				tradition = 50 
				add_fire = 1 
				add_shock = 1 
			}
		}
	}

	hsa_young_men_lubeck = {
		icon = league_of_the_public_weal 
		required_missions = { hsa_unite_hanseatic_league_mission } 
		position = 7 
		trigger = {
			army_size_percentage = 1
			manpower_percentage = 0.6
			num_of_owned_provinces_with = { #new
				value = 5
				OR = {
					has_building = regimental_camp
					has_building = conscription_center
				}
			}
		}
		effect = {
			if = {
				limit = {
					is_trade_league_leader = yes 
				}
				custom_tooltip = hsa_reward_scales_with_number_of_members_tt
			}
			if = {
				limit = { 
					calc_true_if = {
						all_country = {
							is_in_trade_league_with = ROOT
						}
						amount = 6
					}
				}
				add_country_modifier = {
					name = hsa_recruiting_from_league_modifier3
					duration = 7300 
				}
			}
			else_if = {
				limit = { 
					calc_true_if = {
						all_country = {
							is_in_trade_league_with = ROOT
						}
						amount = 5
					}
				}
				add_country_modifier = {
					name = hsa_recruiting_from_league_modifier2
					duration = 5475 
				}
			}
			else_if = {
				limit = {
					calc_true_if = {
						all_country = {
							is_in_trade_league_with = ROOT
						}
						amount = 1
					}
				}
				add_country_modifier = {
					name = hsa_recruiting_from_league_modifier
					duration = 3650 
				}
			}
			else = { add_army_tradition = 20 }
		}
	}
}

uuhsa_free_4b = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			AND = { 
				OR = {
					tag = BRU #Lower Saxons
					tag = LUN
					tag = CLB
					tag = HAN
					tag = POM #Pomeranians
					tag = RUG
					tag = WOL
					tag = STE
				}
				has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
			}
		}
	}
	has_country_shield = yes

	hsa_expand_market_square = { #capitalscope marketplace
		icon = mission_develop_nevas_port 
		required_missions = { } 
		position = 8 
		provinces_to_highlight = {
			province_id = 45 
			NOT = {
				OR = {
					has_building = marketplace 
					has_building = trade_depot
					has_building = stock_exchange
				}
				num_of_times_improved = 4 
			}
		}
		trigger = {
			45 = {
				OR = {
					has_building = marketplace 
					has_building = trade_depot
					has_building = stock_exchange
				}
				num_of_times_improved = 4 
			}
		}
		effect = {
			add_country_modifier = {
				name = hsa_influx_of_trade_and_foreigners_modifier
				duration = 5475 
			}
		}
	}

	hsa_queens_hall = { #capitalscope townhall
		icon = powerhouse_of_the_north
		required_missions = { hsa_expand_market_square }
		position = 8 
		provinces_to_highlight = { province_id = 45 }
		trigger = {
			OR = {
				45 = { num_of_times_improved = 10 }
				monthly_adm = 10 
			}
			45 = { 
				OR = {
					has_building = courthouse
					has_building = town_hall
				}
			}
		}
		effect = {
			country_event = { id = flavor_hsa.10 } #flavor_hsa.10
			45 = {
				add_province_modifier = {
					name = hsa_expand_the_hansehalle_modifier
					duration = 7300 
				}
			}
		}
	}
}

uuhsa_lock_4b = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
		}
		NOT = { has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag }
	}
	has_country_shield = yes

	uuhsa_lock_c4r10 = {
		icon = mission_locked_mission
		required_missions = { hsa_queens_hall }
		position = 10
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c4r11 = {
		icon = mission_locked_mission
		required_missions = { 
			uuhsa_lock_c3r10
			uuhsa_lock_c4r10
			uuhsa_lock_c5r10   
		}
		position = 11
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
}

uuhsa_gated_4b = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			tag = BRU #Lower Saxons
			tag = LUN
			tag = CLB
			tag = HAN
			tag = POM #Pomeranians
			tag = RUG
			tag = WOL
			tag = STE
		}
		has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
	}
	has_country_shield = yes

	hsa_construct_holstentor = { #capitalscope defence roll
		icon = defend_the_city 
		required_missions = { hsa_queens_hall }
		position = 10
		provinces_to_highlight = { province_id = 45 }
		trigger = {
			fortification_expert = 3
			45 = {
				OR = {
					has_fort_building_trigger = yes 
					has_building = ramparts 
				}
			}
		}
		effect = { 
			country_event = { id = flavor_hsa.11 } #flavor_hsa.11
		}
	}

	hsa_impose_lubeck_law = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { 
			hsa_construct_holstentor 
			hsa_tend_towns 
			hsa_wards_city 
		} 
		position = 11 
		trigger = {
			stability = 1 
			adm = 3 
			dip = 3 
			mil = 3 
			if = {
				limit = { 
					OR = {
						has_reform = merchants_reform 
						has_reform = veche_republic
					}
				}
				OR = { 
					faction_influence = {
						faction = mr_traders 
						influence = 50
					}
					faction_influence = {
						faction = mr_aristocrats
						influence = 50
					}
					faction_influence = {
						faction = mr_guilds
						influence = 50
					}
					statesman = 2 
				}
			}
			else = { statesman = 2 }			
		}
		effect = {
			if = {
				limit = {
					faction_influence = {
						faction = mr_traders 
						influence = 50
					}
				}
				capital_scope = {
					add_province_modifier = {
						name = hsa_mercantile_burgermeister_modifier
						duration = 7300 
					}
				}
				hidden_effect = {
					every_country = {
						limit = { is_in_trade_league_with = ROOT }
						capital_scope = {
							add_province_modifier = {
								name = hsa_mercantile_burgermeister_modifier
								duration = 7300 
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					faction_influence = {
						faction = mr_guilds 
						influence = 50
					}
				}
				capital_scope = {
					add_province_modifier = {
						name = hsa_guild_burgermeister_modifier
						duration = 7300 
					}
				}
				hidden_effect = {
					every_country = {
						limit = { is_in_trade_league_with = ROOT }
						capital_scope = {
							add_province_modifier = {
								name = hsa_guild_burgermeister_modifier
								duration = 7300 
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					faction_influence = {
						faction = mr_aristocrats 
						influence = 50
					}
				}
				capital_scope = {
					add_province_modifier = {
						name = hsa_aristocrat_burgermeister_modifier
						duration = 7300 
					}
					add_base_manpower = 1 
				}
				hidden_effect = {
					every_country = {
						limit = { is_in_trade_league_with = ROOT }
						capital_scope = {
							add_province_modifier = {
								name = hsa_aristocrat_burgermeister_modifier
								duration = 7300 
							}
							add_base_manpower = 1
						}
					}
				}
			}
			else = {
				capital_scope = {
					add_province_modifier = {
						name = hsa_mercantile_burgermeister_modifier
						duration = 7300 
					}
				}
				hidden_effect = {
					every_country = {
						limit = { is_in_trade_league_with = ROOT }
						capital_scope = {
							add_province_modifier = {
								name = hsa_mercantile_burgermeister_modifier
								duration = 7300 
							}
						}
					}
				}
			}
			custom_tooltip = general_tooltip_dynamic_reward
			custom_tooltip = hsa_every_league_member_gets_this_reward_tt
		}
	}
}

uuhsa_lock_5 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
		}
		NOT = { has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag }
	}
	has_country_shield = yes

	uuhsa_lock_c5r6 = {
		icon = mission_locked_mission
		required_missions = { uuhsa_lock_c4r5 }
		position = 6
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}	
	uuhsa_lock_c5r7 = {
		icon = mission_locked_mission
		required_missions = { 
			hsa_unite_hanseatic_league_mission
			uuhsa_lock_c4r6
			uuhsa_lock_c5r6
		}
		position = 7
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c5r8 = {
		icon = mission_locked_mission
		required_missions = { 
			uuhsa_lock_c4r7
			uuhsa_lock_c5r7 
		}
		position = 8
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c5r9 = {
		icon = mission_locked_mission
		required_missions = {  }
		position = 9
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}
	uuhsa_lock_c5r10 = {
		icon = mission_locked_mission
		required_missions = { 
			hsa_finance_guilds
			uuhsa_lock_c5r9 
		}
		position = 10
		trigger = {
			custom_trigger_tooltip = {
				tooltip = selectable_mission_trigger_tt
				always = no
			}
		}
		effect = {
			custom_tooltip = uuhsa_unlock_when_hansa_tt
		}
	}		
}

uuhsa_gated_5 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HAM #Hamburg 
			tag = HSA #Lubeck 
			tag = BRE #Bremen
			tag = BRU #Lower Saxons
			tag = LUN
			tag = CLB
			tag = HAN
			tag = POM #Pomeranians
			tag = RUG
			tag = WOL
			tag = STE
		}
		has_country_flag = hsa_proclaimed_queen_of_the_hansa_flag
	}
	has_country_shield = yes
	
	hsa_develop_handsflotte = {
		icon = mission_corsairs_of_the_north_sea
		required_missions = { hsa_schiffbauer_gilde } 
		position = 6
		trigger = {
			navy_size_percentage = 1 
			naval_maintenance = 1 
			num_of_light_ship = 20
		}
		effect = {
			country_event = { id = flavor_hsa.13 } #Cog event moved to here
			add_country_modifier = {
				name = hsa_hanseatic_trade_fleet_modifier
				duration = 10950
			}
			weser_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	hsa_marine_pilots = {
		icon = overshadow_venice
		required_missions = { 
			hsa_develop_handsflotte 
			hsa_expand_admiralty
		}
		position = 7
		trigger = {
			naval_forcelimit = 25
			has_leader_with = { 
				manuever = 4 
				admiral = yes 
			}
			NOT = {
				any_country = {
					45 = { 
						has_privateer_share_in_trade_node = {
							who = PREV
							share = 0.01
						}
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = hsa_safe_seaways_modifier 
				duration = 7300 
			}	
			define_advisor = {
				type = naval_reformer 
				cost_multiplier = 0.5 
				skill = 3 
			}
		}
	}

	hsa_appoint_war_minister = { #we nerfing this prob
		icon = military_self_reliance
		required_missions = {
			hsa_young_men_lubeck 
			hsa_marine_pilots
		}
		position = 8 
		trigger = {
			has_mil_advisor_3 = yes
			OR = {
				army_professionalism = 0.6
				army_tradition = 80
			}
			total_development = 350 
			OR = {
				full_idea_group = quality_ideas 
				full_idea_group = offensive_ideas 
				full_idea_group = quantity_ideas 
			}
		}
		effect = {
			custom_tooltip = hsa_army_reformer_tt
			tooltip = {
				add_country_modifier = {
					name = hsa_general_army_reform_modifier
					duration = -1 
				}
			}
			custom_tooltip = hsa_army_organiser_tt
			tooltip = {
				add_country_modifier = {
					name = hsa_general_army_organization_modifier
					duration = -1 
				}
			}
			custom_tooltip = hsa_commandant_tt
			tooltip = {
				add_country_modifier = {
					name = hsa_military_excellence_modifier
					duration = -1 
				}
			}
			custom_tooltip = hsa_quartermaster_tt
			tooltip = {
				add_country_modifier = {
					name = hsa_modernized_supply_lines_modifier
					duration = -1 
				}
			}
			custom_tooltip = hsa_recruitmaster_tt
			tooltip = {
				add_country_modifier = {
					name = hsa_zealous_recruitment_modifier
					duration = -1 
				}
			}
			custom_tooltip = hsa_grandcaptain_tt
			tooltip = {
				add_country_modifier = {
					name = hsa_improved_military_administration_modifier
					duration = -1 
				}
			}
			custom_tooltip = hsa_fortification_expert_tt
			tooltip = {
				add_country_modifier = {
					name = hsa_fortification_efforts_modifier
					duration = -1 
				}
			}
			hidden_effect = {#
				if = {
					limit = { army_reformer = 3 }
					add_country_modifier = {
						name = hsa_general_army_reform_modifier
						duration = -1 
					}
				}
				else_if = {#
					limit = { army_organiser = 3 }
					add_country_modifier = {
						name = hsa_general_army_organization_modifier
						duration = -1 
					}
				}
				else_if = {#
					limit = { commandant = 3 }
					add_country_modifier = {
						name = hsa_military_excellence_modifier
						duration = -1 
					}
				}
				else_if = {#
					limit = { quartermaster = 3 }
					add_country_modifier = {
						name = hsa_modernized_supply_lines_modifier
						duration = -1 
					}
				}
				else_if = {#
					limit = { recruitmaster = 3 }
					add_country_modifier = {
						name = hsa_zealous_recruitment_modifier
						duration = -1 
					}
				}
				else_if = {#
					limit = { grand_captain = 3 }
					add_country_modifier = {
						name = hsa_improved_military_administration_modifier
						duration = -1 
					}
				}
				else_if = {
					limit = { fortification_expert = 3 }
					add_country_modifier = {
						name = hsa_fortification_efforts_modifier
						duration = -1 
					}
				}
			}
		}
	}

	hsa_organize_hanseatic_diets = {
		icon = friends_in_high_places
		required_missions = { }
		position = 9 
		provinces_to_highlight = {
			owner = { 
				NOT = { tag = ROOT }
				OR = { 
					alliance_with = ROOT 
					is_in_trade_league_with = ROOT 
				}
				NOT = { 
					has_opinion = { 
						who = ROOT 
						value = 100 
					}
				}
			}
		}
		trigger = {
			OR = {
				dip = 4 
				ruler_has_personality = charismatic_negotiator_personality
				ruler_has_personality = silver_tongue_personality
			}
			if = {
				limit = { government = republic }
				OR = {
					reform_level = 3 
					republican_tradition = 80
				}
			}
			OR = {
				diplomat = 1 
				statesman = 1 
			}
			if = {
				limit = { 
					OR = {
						is_in_trade_league = yes
						num_of_subjects = 1 
					}
				}
				custom_trigger_tooltip = { 
					tooltip = hsa_either_trade_or_subject_all_100_tt
					all_country = {
						OR = {
							NOT = { is_in_trade_league_with = ROOT }
							has_opinion = {
								who = ROOT
								value = 100
							}
						}
						OR = {
							NOT = { is_subject_of = ROOT }
							has_opinion = {
								who = ROOT
								value = 100
							}
						}
					}
				}
			}
		}
		effect = {
			if = {
				limit = { has_reform = frequent_elections_reform }
				add_stability_or_adm_power = yes 
				add_ruler_modifier = {
					name = hsa_fresh_administration_modifier
					duration = 10950 
				}
			}
			else_if = {
				limit = { 
					OR = {
						has_reform = consolidation_of_power_reform 
						has_reform = consolidate_power_in_doge_reform
					}
				}
				add_country_modifier = { 
					name = hsa_longterm_admin_modifier 
					duration = 9125 
				}
				if = { 
					limit = {
						adm = 5
						NOT = { adm = 6 }
					}
					change_adm = 1 
				}
				else = { add_adm_power = 50 }
				if = { 
					limit = {
						dip = 5
						NOT = { dip = 6 }
					}
					change_dip = 1 
				}
				else = { add_dip_power = 50 }
				if = { 
					limit = {
						mil = 5
						NOT = { mil = 6 }
					}
					change_mil = 1 
				}
				else = { add_mil_power = 50 }
			}
			else_if = {
				limit = { has_reform = consolidate_power_in_cities_reform }
				custom_tooltip = hsa_every_league_member_and_subject_adm_power_and_50_opinion_tt 
				hidden_effect = {
					every_country = {
						limit = {
							OR = {
								is_in_trade_league_with = ROOT 
								is_subject_of = ROOT 
							}
						}
						add_adm_power = 100
						add_opinion = {
							who = ROOT  
							modifier = hsa_allowed_regional_admin_opinion_modifier 
						}
					}
				}
				change_government_reform_progress = 100 
			}
			else_if = {
				limit = { has_reform = lottery_reform }
				add_ruler_modifier = {
					name = hsa_diplomatic_powerhouse 
					duration = 10950 
				}
			}
			else = {
				add_country_modifier = {
					name = hsa_hanseatic_diets_modifier 
					duration = 7300 
				}
				add_republican_tradition = 5
				add_legitimacy = 10 
				add_devotion = 10 
			}
			custom_tooltip = uuhsa_diet_mission_dynamic_reward
			if = {
				limit = { 
					OR = {
						has_government_attribute = is_merchant_republic
						has_reform = venetian_merchant_republic #This counts as a merchant republic
						has_reform = pirate_republic_reform #meme time 
						has_reform = veche_republic #This counts as a merchant republic
						has_reform = great_veche_republic #This counts as a merchant republic
					}
				}
				custom_tooltip = uuhsa_enable_tagfahrt_tt
				hidden_effect = { 
					set_country_flag = uuhsa_enable_tagfahrt_flag
				}	
			}
			
		}
	}

	hsa_wards_city = {
		icon = personal_diplomacy
		required_missions = { hsa_organize_hanseatic_diets hsa_finance_guilds } 
		position = 10
		trigger = {
			mercantilism = 60 
			OR = {
				full_idea_group = trade_ideas 
				AND = {
					faction_in_power = mr_traders
					power_projection = 50 
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = hsa_altermanner_modifier
				duration = 9125 
			}
			custom_tooltip = hsa_every_league_member_gets_this_reward_tt
			hidden_effect = {
				every_country = {
					limit = { is_in_trade_league_with = ROOT }
					add_country_modifier = {
						name = hsa_altermanner_modifier
						duration = 9125 
					}
				}
			}
			change_dip = 1 
			change_adm = 1 
		}
	}
}


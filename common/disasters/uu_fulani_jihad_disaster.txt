uu_fulani_jihad_disaster = {
	potential = {
		OR = {
			has_country_modifier = uu_fulani_preacher_accepted
			has_country_modifier = uu_fulani_preacher_rejected
		}
		NOT = { has_country_flag = uu_fulani_jihad_disaster_happened }
	}


	can_start = {
		has_any_disaster = no
		has_country_modifier = uu_fulani_preacher_rejected
		is_at_war = no
		OR = {
			AND = {
				owns = 1148		#Gobir
				custom_trigger_tooltip = {
					tooltip = uu_sokoto_happened_tt
					NOT = { has_global_flag = uu_sokoto_happened_flag }
				}
				NOT = { exists = SOK }
			}
			AND = {
				owns = 1131		#Massina
				custom_trigger_tooltip = {
					tooltip = uu_massina_happened_tt
					NOT = { has_global_flag = uu_massina_happened_flag }
				}
				NOT = { exists = ZAF }
			}
			AND = {
				owns = 2237		#Tekrur 
				custom_trigger_tooltip = {
					tooltip = uu_futatoro_happened_tt
					NOT = { has_global_flag = uu_futatoro_happened_flag }
				}
				NOT = { exists = FUL }
			}
		}
	}
	
	can_stop = {
		OR = {
			capital_scope = {
				NOT = { region = guinea_region }
				NOT = { region = sahel_region }
				NOT = { region = niger_region }
			}
			NOT = { num_of_cities = 2 } 
			custom_trigger_tooltip = {
				tooltip = uu_fulani_jihad_can_happen_tt
				AND = {
					OR = {
						NOT = { owns = 1148 } #Gobir
						has_global_flag = uu_sokoto_happened_flag
						exists = SOK
					}
					OR = {
						NOT = { owns = 1131 } #Massina
						has_global_flag = uu_massina_happened_flag
						exists = ZAF
					}
					OR = {
						NOT = { owns = 2237 } #Tekrur
						has_global_flag = uu_futatoro_happened_flag
						exists = FUL
					}
				}
			}
		}
	}
	
	
	progress = {
		modifier = {
			factor = 6
			has_country_modifier = uu_fulani_preacher_rejected
		}

		modifier = {
			factor = -8
			stability = 3
		}
		modifier = {
			factor = 2
			NOT = { stability = 1 }
		}
		modifier = {
			factor = 2
			NOT = { stability = 0 }
		}

		modifier = {
			factor = -4
			religious_unity = 0.95
		}
		modifier = {
			factor = 3
			NOT = { religious_unity = 0.7 }
		}
		modifier = {
			factor = 3
			NOT = { religious_unity = 0.5 }
		}
		
		modifier = {
			factor = 4
			NOT = {
				estate_loyalty = {
					estate = estate_church
					loyalty = 60
				}
			}
			religion_group = muslim 
		}
		modifier = {
			factor = 4
			estate_influence = {
				estate = estate_church
				influence = 50
			}
			NOT = { religion_group = muslim }  
		}
		
		modifier = {
			factor = 2
			is_in_deficit = yes
		}
	}
	
	can_end = {
		always = yes
	}

	on_start = uufulojihad.0
	
	on_start_effect = {
		if = {
			limit = {
				capital_scope = {
					OR = {
						area = katsina_area
						area = hausa_area
						area = zazzau_area
						area = lower_niger_area
						area = adamawa_plateau_area
						area = kanem_area
						area = bornu_area
						area = darfur_central_sahara_area
						area = azbin_area
						area = east_azbin_area
						area = gulf_of_guinea_area
						area = benin_area
						area = atacora_oueme_area
						area = sao_tome_area
					}
				}
				NOT = { has_global_flag = uu_sokoto_happened_flag }
			}
			tooltip = {
				country_event = {
					id = uufulojihad.1
				}
			}
		} else_if = {
			limit = {
				capital_scope = {
					OR = {
						area = western_sahara_area
						area = niger_bend_area
						area = dendi_area
						area = upper_volta_area
						area = lower_volta_area
						area = west_africa_coast_area
						area = kong_area
						area = guinea_area
						area = guinea_coast_area
						area = yamoussoukro_area
						area = manding_area
						area = baghena_area
						area = jenne_area
					}
				}
				NOT = { has_global_flag = uu_massina_happened_flag }
			}
			tooltip = {
				country_event = {
					id = uufulojihad.2
				}
			}
		} else_if = {
			limit = {
				capital_scope = {
					OR = {
						area = tekrur_area
						area = futa_jallon_area
						area = jolof_area
						area = cap_verde_area
					}
				}
				NOT = { has_global_flag = uu_futatoro_happened_flag }
			}
			tooltip = {
				country_event = {
					id = uufulojihad.3
				}
			}
		}
		set_country_flag = uu_fulani_jihad_disaster_happened
	}
	
	on_monthly = {
	}
}

